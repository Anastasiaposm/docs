***********************************
Модуль "Определение местоположения"
***********************************

Модуль "Определение местоположения" позволяет автоматически определить город местоположения клиента или выбрать город из списка.

Для работы данного модуля необходимо установить модуль "Города" (:doc:`см. "Установка модулей" </manager/cities/index>`).

Описание работы с модулем
-------------------------

1.  Установите модуль "Города" (:doc:`см. "Установка модулей" </manager/addons/install/index>`).

    .. image:: img/geolocation_01.png
        :alt: Модуль "Определение местоположения"

2.  Установите модуль "Определение местоположения" (:doc:`см. "Установка модулей" </manager/addons/install/index>`).

    .. image:: img/geolocation_02.png
        :alt: Модуль "Определение местоположения"

    В настройках модуля выберите провайдера с помощью которого будет определятся местоположение.

        *   Браузер - определение местоположения, используя встроенные средства браузера.

        *   Yandex - определение местоположения на основе ip пользователя.

        *   Автоматическое - использование наиболее лучший способ определения "Браузер" или "Yandex".

        .. image:: img/geolocation_03.png
            :alt: Модуль "Определение местоположения"

3.  Для указания списка городов, которые будут отображаться в списке выбора перейдите на страницу "Города". 

    .. note::

        Верхнее меню → Модули → Определение местоположения

    .. image:: img/geolocation_04.png
        :alt: Модуль "Определение местоположения"

4.  Для создания блока перейдите на страницу "Макеты" ( Верхнее меню → Дизайн → Макеты ). Добавьте в нужной секции новый блок.

    .. image:: img/geolocation_05.png
        :alt: Модуль "Определение местоположения"

5.  Выберите во вкладке "Создать новый блок" блок "Определение города", задайте название блока и нажмите кнопку "Создать".

    .. image:: img/geolocation_06.png
        :alt: Модуль "Определение местоположения"

6.  Перейдите в магазин. Появится окно с выбором города и сообщение с вопросом о предоставлении доступа для определения местоположения.

    .. image:: img/geolocation_07.png
        :alt: Модуль "Определение местоположения"

    Если город в поле указан верно нажмите на кнопку "Город определен верно". Для выбора города из списка нажмите на название города. В поле с городом вы можете указать свой город.

7.  После выбора города он автоматически отобразится в блоке.

    .. image:: img/geolocation_08.png
        :alt: Модуль "Определение местоположения"

    Для изменения города нажмите на ссылку города в блоке и измените на нужный город.
