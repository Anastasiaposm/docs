************************************************
Настройка обмена данными между 1С и Multi-Vendor
************************************************

Инструкция по настройке обмена данными между 1С и интернет-магазином на платформе Multi-Vendor.
При обмене данными между 1С и Multi-Vendor, товары выгружаются в интернет-магазин для конкретного продавца, e-mail и пароль администратора которого заданы в настройках узла обмена (:doc:`см. "Настройка узла обмена" </rus/1c/instruction/index>`).

.. contents:: Содержание
    :local: 
    :depth: 3


Настройки в 1С
--------------
Для обмена данными между 1С и Multi-Vendor необходимо открыть базу 1С, с которой будет происходить обмен и настроить (:doc:`см. "Настройки в 1С" </rus/1c/instruction/index>`).
В процессе настройки обмена, при создании узла заполните поля "Пользователь" и "Пароль" данными администратора магазина, с которым будет производиться обмен.

.. fancybox:: img/M_image_001.png
   :alt: Обмен данными 1C и Multi-Vendor
   
Настройки Multi-Vendor
----------------------
Для обмена данными 1С с интернет-магазином установите модуль "Экспорт и импорт 1С" (:doc:`см. "Установка модулей" </manager/addons/install/index>`).

.. note::

    Панель администратора → Верхнее меню → Модули → Управление модулями → "Экспорт и импорт в 1С"
	
.. fancybox:: img/M_image_002.png
   :alt: Обмен данными 1C и Multi-Vendor

После установки модуля откройте его настройки.

Окно "Настройки модуля" содержит вкладки:

    *   Общие настройки.

	*   Настройки параметров и опций.

	*   Параметры доставки.

	*   Установка видов цен.

	*   Ограничение заказов.
    
    *   Ограничение загрузки характеристик
	
.. fancybox:: img/M_image_003.PNG
   :alt: Обмен данными 1C и Multi-Vendor

Общие настройки
===============
Вкладка "Общие настройки" содержит следующие поля:

.. fancybox:: img/M_image_004.PNG
   :alt: Обмен данными 1C и Multi-Vendor

.. list-table::
    :widths: 15 30

    *   -   Наименование поля

        -   Описание
	
    *   -   Категория для товаров

        -   Категория которая будет присвоена товарам, у которых группа из 1С не соответствует категории из интернет-магазина.

    *   -   Использовать в названии товара

        -   Параметр, определяющий какие данные будут записываться в наименование товара:

            *   Наименование

            *   Полное наименование

    *   -   Использовать в артикуле товара

        -   Определяет какие данные будут записываться в поле артикула товара:

            *   Артикул номенклатуры

            *   Код номенклатуры

    *   -   Использовать изготовителя

        -   Будет выгружен изготовитель номенклатуры. Изготовитель будет добавлен в характеристику товаров "Бренд/Производитель".

    *   -   Скрывать товары с нулевым остатком

        -   Будут скрыты товары с нулевым количеством.

    *   -   Добавлять налог к товарам

        -   Товарам будут добавлены налоги, используемые в 1С.

            Настройки выгрузки налогов доступны на странице:

            .. note::

                Модули → 1С → Цены и налоги из 1С.

            .. fancybox:: img/M_image_005.png
                :alt: Обмен данными 1C и Multi-Vendor

            Для настройки выгрузки налогов необходимо указать соответствия налогов в CS-Cart и процентной ставкой в 1С.

Настройка параметров и опций
============================
        
Вкладка "Настройка параметров и опций" содержит следующие настройки:

.. fancybox:: img/M_image_006.png
   :alt: Обмен данными 1C и Multi-Vendor

.. list-table::
    :widths: 15 30

    *   -   Наименование поля

        -   Описание

    *   -   Имя опции

        -   Название выгружаемой опции для комбинации характеристик номенклатуры (для стандартного отображения характеристик номенклатуры)

            Значение по умолчанию: "Варианты".

    *   -   Создавать комбинацию с нулевым количеством.

        -   Будут созданы комбинации товаров с нулевым остатком.

    *   -   Способы отображения характеристик из 1С

        -   Необходимо выбрать способ отображения характеристик номенклатуры. 

            *   Стандартный способ - создается опция по комбинациям характеристик. 

            *   "По свойствам объекта" - создаются опции по каждой характеристике номенклатуры.

Параметры доставки
==================
    
Вкладка "Параметры доставки" настраивает загрузку дополнительных реквизитов номенклатуры (в одном поле можно указать несколько реквизитов для каждого вида номенклатуры с новой строки) и содержит следующие настройки:
    
.. fancybox:: img/M_image_007.png
   :alt: Обмен данными 1C и Multi-Vendor

.. list-table::
    :widths: 15 30

    *   -   Наименование поля

        -   Описание

    *   -   Включать отдельно стоимость доставки заказа для 1С

        -   Доставка будет определена как отдельная номенклатура.

    *   -   Реквизит веса в 1С

        -   Выгружаемый дополнительный реквизит номенклатуры. Тип значения реквизита в 1С - Число.

    *   -   Отображать вес как характеристику

        -   По весу товара будет создана характеристика, для фильтра товаров по характеристикам.

    *   -   Бесплатная доставка

        -   Выгружаемый дополнительный реквизит номенклатуры. Тип значения реквизита в 1С - Булево.

    *   -   Отображать бесплатную доставку как характеристику

        -   По параметру "Бесплатная доставка товара" будет создана характеристика товара.

    *   -   Стоимость доставки

        -   Дополнительный реквизит номенклатуры. Тип значения реквизита в 1С - Число.

    *   -   Количество штук в коробке

        -   Дополнительный реквизит номенклатуры. Тип значения реквизита в 1С - Число.

    *   -   Длина коробки

        -   Дополнительный реквизит номенклатуры. Тип значения реквизита в 1С - Число.

    *   -   Ширина коробки

        -   Дополнительный реквизит номенклатуры. Тип значения реквизита в 1С - Число.

    *   -   Высота коробки

        -   Дополнительный реквизит номенклатуры. Тип значения реквизита в 1С - Число.


Виды цен
========
        
Вкладка "Установка видов цен" предназначена для возможности выгрузки нескольких видов цен и содержит следующие поля:

.. fancybox:: img/M_image_008.png
   :alt: Обмен данными 1C и Multi-Vendor

   
Выберите настройку **Использовать эту функцию** для выгрузки нескольких цен (Базовая цена, Рекомендованная цена, Оптовые цены). 

Выгрузка нескольких цен реализована с помощью цен для групп пользователей. Вы можете задать для каждой группы пользователей (Опт, Розница, Золотой клиент) свою цену на товар.

Для настройки выгрузки цен и соответствия цен группам пользователей в CS-Cart перейдите на страницу "Цены и налоги из 1С".

.. note::

    Верхнее меню → Модули → 1С → Цены и налоги из 1С.

Если существует необходимость выгрузки нескольких видов цен в одну цену, то их можно добавить в настройках через запятую.

Окно "Цены из 1С" содержит поля:

*   "Цена из 1С" - это цена, которая будет доступна для указанной группы пользователей; 

*   "Базовая цена" - это цена товара по умолчанию для всех групп пользователей; 

*   "Рекомендованная цена" - это рекомендованная цена товара в разделе "Ценообразование/наличие".
    
.. fancybox:: img/M_image_009.png
   :alt: Обмен данными 1C и Multi-Vendor


Для проверки введенных названий цен (соглашений) в модуле предусмотрено тестирование выгружаемых цен. Для тестирования:

1.  Установите галочку "Запустить модуль в режиме отладки цен" в настройках модуля.
    
    .. fancybox:: img/M_image_010.png
       :alt: Обмен данными 1C и Multi-Vendor

2.  В 1С произведите выгрузку в интернет-магазин (данные в магазин внесены не будут). Ответ сервера будет "Failure". 

3.  Далее перейдите на страницу "Цены и налоги из 1С" в панели администратора и посмотрите результат. Внесите исправление и обновите страницу. 

4.  Для полноценной выгрузки уберите галочку "Запустить модуль в режиме отладки цен" в настройках модуля "Экспорт и импорт в 1С" и повторите выгрузку.


Ограничение заказов
===================
    
Вкладка "Ограничение заказов" содержит следующие поля:

.. fancybox:: img/M_image_011.png
   :alt: Обмен данными 1C и Multi-Vendor
.. list-table::
    :widths: 15 30
    
    *   -   Использовать эту функцию
    
        -   Включает функцию фильтрации выгружаемых заказов из CS-Cart.

    *   -   Выгружать с номера
    
        -   Для загрузки будут доступны заказы, начиная с указанного номера.

    *   -   Статусы ордеров
    
        -   Фильтр загрузки заказов по статусам.


Ограничение загрузки характеристик
==================================

Вкладка "Ограничение загрузки характеристик" содержит следующие поля:

.. fancybox:: img/M_image_30.PNG
   :alt: Обмен данными 1C и CS-Cart (Multi-Vendor)
.. list-table::
    :widths: 15 30
    
    *   -   Использовать эту функцию
    
        -   Включает функцию фильтрации загружаемых характеристик в CS-Cart.
        
    *   -   Загружать только/Не загружать

        -   Выбор метода исключения.

    *   -   Список характеристик
    
        -   Исключаемый/включаемый список характеристик(свойств номенклатуры). Каждая характеристика с новой строки.

Обмен данными между 1С и Multi-Vendor
-------------------------------------
Обмен данными между 1С и Multi-Vendor осуществляется аналогично CS-Cart (:doc:`см. "Обмен данными между 1С и CS-Cart" </rus/1c/instruction/index>`).

В процессе обмена, данным товаров загруженным с 1С в интернет-магазин в поле продавец будет записано название продавца.
Название продавца присваиваемое товарам, зависит от введенного e-mail и пароля администратора продавца в настройках узла обмена 1С.

.. fancybox:: img/M_image_012.PNG
   :alt: Обмен данными 1C и Multi-Vendor

.. fancybox:: img/M_image_013.PNG
   :alt: Обмен данными 1C и Multi-Vendor

.. fancybox:: img/M_image_014.PNG
   :alt: Обмен данными 1C и Multi-Vendor
