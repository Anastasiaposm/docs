****************
Вариации товаров
****************

.. note::

    Вариации товаров являются частью :doc:`одноимённого модуля </user_guide/addons/product_variations/index>`.

Вариации — это похожие товары, которые отличаются друг от друга одной или несколькими :doc:`характеристиками </user_guide/manage_products/features/index>`. Например, "зелёная футболка "Спорт" размера S" и "красная футболка "Спорт" размера M". Таким товарам нужно три вещи:

#. Дать покупателям выбрать нужные значения характеристик на странице товара.

#. Показать часть вариаций (например, разные цвета) как отдельные позиции в каталоге. Так покупатель ещё до страницы товара увидит нужный цвет.

#. Не показывать часть вариаций (например, размеры) как отдельные позиции в каталоге. Так покупатель не запутается среди множества футболок с разными размерами и одинаковой картинкой.

   .. fancybox:: /user_guide/addons/product_variations/img/variation_selection.png
       :alt: Переключение между вариациями товара на витрине.

.. contents::
    :local:

============
Терминология
============

**Группа вариаций** — группа похожих товаров, которые отличаются друг от друга одной или несколькими характеристиками.

**Вариация** — товар, который относится к группе вариаций. Одновременно товар может относиться только к одной группе вариаций, но заменить группу у товара легко. Если вариацию отцепить от группы вариаций, она станет обычным товаром.

**Позиция в каталоге** — одно место на списке товаров. Пока не было вариаций, то "товар" и "позиция в каталоге" означали одно и то же. Но вариации могут и не занимать позицию в каталоге, поэтому возникла необходимость в таком термине.

.. hint::

    Каждая вариация — это товар, но не каждый товар — вариация. Используйте **Расширенный поиск** на списке товаров в панели администратора: например там можно сделать так, чтобы на списке товаров были только вариации или только позиции в каталоге.

---------------

У футболки 3 цвета, по 5 размеров в каждом. В этом случае у нас 15 *товаров*. Мы хотим добавить переключение между ними и объединяем их в *группу вариаций* на основе характеристик "Цвет" и "Размер". Теперь у нас 15 *вариаций*, и между всеми ними можно переключаться их страницах.

В зависимости от настроек характеристик, эти 15 вариаций могут занимать:

* *1 позицию в каталоге* — выбор цветов и размеров остаётся только на странице товара;

* *3 позиции в каталоге* — футболки разных цветов отображаются на витрине как отдельные товары, а вот размеры можно выбрать только на странице товара;

* *5 позиций в каталоге* — если кто-то решит отображать размеры как отдельные товары, а выбор цвета оставить только на странице товара; с футболками такое неактуально, но может подойти для других товаров.

* *15 позиций в каталоге* — когда каждый размер и цвет отображается как отдельный товар, т.е. каждой вариации соответствует своя позиция в каталоге.

  .. note::

      Эта схема работает, даже когда характеристик больше двух. Настройки характеристик можно поменять в любой момент, но количество занимаемых позиций изменится только после того, как вы распустите и пересоздадите группу вариаций. Подробности ниже.

===================
Работа с вариациями
===================

------------------------
Создание группы вариаций
------------------------

#. На странице редактирования :doc:`характеристики </user_guide/manage_products/features/index>` (либо новой, либо существующей) задайте одну из двух **Целей**, которые позволяют создавать вариции.

   .. hint::

      От выбранной цели зависит, займут ли вариации с разными значениями этой характеристики отдельные позиции в каталоге. У каждой цели есть описание; по нему должно быть понятно, какая цель вам подойдёт.

   Если вариации у вас различаются на основе нескольких характеристик, то сделайте несколько характеристик, можно даже с разными значениями у **Цели**. Тогда CS-Cart разберётся, каким их вариаций выделять позиции в каталоге, а какие оставить для выбора только на странице товара.

#. Перейдите на страницу редактирования любого :doc:`товара </user_guide/manage_products/products/index>`, который хотите сделать вариацией. Убедитесь, что у него заданы значения всех характеристик, которые отличают его от других подобных товаров.

#. Перейдите на вкладку **Вариации**.

   .. fancybox:: img/product_variations_tab.png
       :alt: Со страницы каждой вариации можно в отдельной вкладке управлять всей группой.

   Дальше есть 2 способа позволить покупателям переключаться со страницы этого товара на другие похожие товары:

   * **Создать группу вариаций.**

     Для этого нажмите кнопку **Добавить вариации**. Так вы сможете добавить в группу вариаций другие товары, у которых заданы значения отличительных характеристик. Также есть возможность создать такие товары автоматически на основе характеристик.

   * **Добавить этот товар как вариацию в существующую группу.**

     Для этого начните вводить код группы вариаций в поле слева. CS-Cart сам предложит возможные варианты. Если группа точно есть, а CS-Cart её не предлагает, то перепроверьте заданы ли у товара все характеристики, на основе которых построена группа.

---------------------
Управление и удаление
---------------------

Когда группа вариаций создана, то все товары из неё отображаются на вкладке **Вариации** у любого товара в группе. Здесь вы можете:

* увидеть, какие из вариаций занимают позицию в каталоге, а какие — нет. У вариаций без своей позиции в каталоге картинка меньше;

* указать, какую из нескольких вариаций делать выбранной по умолчанию для позиции в каталоге;

  .. important::

      Остальные вариации будут заимствовать многие свои свойства у вариации, выбранной по умолчанию.

* убрать вариацию из группы; товар при этом не пропадёт, а станет самостоятельным;

* удалить вариацию насовсем;

* поменять код группы — его можно использовать, чтобы потом добавлять другие товары в эту группу как вариации. Код группы может содержать только цифры, латиницу и знаки "-" и "_";

* добавить ещё вариаций в группу;

* переключиться на редактирование вариаций на списке товаров — так можно получить доступ к массовому редактированию и удалению;

* распустить группу — тогда все вариации из неё станут самостоятельными товарами, и пропадёт возможность переключаться между ними со страницы товара.

  .. fancybox:: img/product_variations_list.png
      :alt: У позиций в каталоге картинка больше, чем у вариаций. которые на списке товаров не отображаются.
