****************
Вариации товаров
****************

.. note::

    Вариации товаров впервые появились в **CS-Cart 4.6.1** как альтернатива :doc:`комбинациям опций </user_guide/manage_products/options/option_combinations>`. Чтобы создавать вариации, :doc:`установите и включите соответствующий модуль </user_guide/addons/product_variations/index>`. **Модуль находится в стадии бета-версии.**

С помощью вариаций можно группировать :doc:`варианты разных опций </user_guide/manage_products/options/index>`. Допустим, мы продаём футболки. Футболка может быть одного из 3 цветов (красный, синий, зелёный) и одного из 3 размеров (S, M, L). В этом случае *Футболка* будет товаром, а *синяя футболка с размером L* будет одной из вариаций этого товара.

.. fancybox:: img/product_variations.png
    :alt: Вариации товара отображаются на витрине практически так же, как и комбинации опций.

У товара могут быть либо комбинации опций, либо вариации. Если вы планируете создавать вариации для товара, то :doc:`при создании этого товара <add_product>` выберите тип *Настраиваемый товар*.

.. important::

    После того, как товар создан, тип изменить нельзя. Поэтому важно знать, :doc:`чем комбинации опций отличаются от вариаций товара <simple_versus_configurable>`.

.. fancybox:: img/product_type.png
    :alt: Тип товара задаётся при создании товара и определяет, как будут работать опции товара.

.. contents::
    :local: 
    :depth: 1

========================
Добавить вариации товара
========================

#. В панели администратора откройте страницу **Товары → Товары** и найдите настраиваемый товар. Воспользуйтесь ссылкой **Расширенный поиск** в панели поиска справа — в открывшемся всплывающем окне вы сможете исключить простые товары и искать только настраиваемые.

#. Нажмите на название настраиваемого товара, чтобы открыть страницу редактирования.

#. Перейдите на вкладку **Опции** и нажмите кнопку **Сгенерировать вариации товара**.

   .. note::

       У товара должна быть хотя бы одна опция с типом *Флажок*, *Список вариантов* или *Радиогруппа*; иначе создать вариации этого товара не получится.

   .. fancybox:: img/generate_product_variations.png
       :alt: Воспользуйтесь кнопкой "Сгенерировать вариации товаров", чтобы создать вариации.

#. Откроется список опций и их вариантов. Выберите варианты, на основании которых будут сгенерированы вариации. Используйте кнопки **CTRL** или **Shift**, чтобы выбрать одновременно несколько вариантов.

   .. note::

       Пока что вариации можно только сгенерировать, а генерация перезаписывает существующие вариации товара. Поэтому лучше сразу создать все вариации, которые могут понадобиться. Если каких-то вариаций нет в наличии, их можно будет отключить.

   .. fancybox:: img/select_variants.png
       :alt: Лучше создать все возможные вариации и отключить ненужные. Иначе потом придётся заново генерировать все вариации товара, чтобы добавить одну новую.

#. Нажмите кнопку **Вперёд**.

#. Откроется список всех вариаций, которые будут сгенерированы для товара. Здесь вы сможете задать вариациям название, код, цену, рекомендованную цену, вес и количество на складе. Также вы сможете удалить ненужные вариации.

#. Когда вы закончите настройку вариаций, нажмите кнопку **Сгенерировать**. Вариации будут сгенерированы, а вам откроется страница с их списком; здесь вариации отображаются как отдельные товары.

   .. warning::

       Нажатие кнопки **Сгенерировать** удалит все вариации этого товара, которые вы создали ранее.

   .. fancybox:: img/generate_button.png
       :alt: Кнопка "Сгенерировать" создаст вариации, которые вы видите в списке, но удалит уже существующие вариации товара.

=============================
Редактировать вариации товара
=============================

#. Откройте страницу **Товары → Товары** в панели администратора и найдите вариацию, которую нужно отредактировать. Есть несколько способов найти вариацию:

   * Воспользуйтесь ссылкой **Расширенный поиск** в меню поиска справа. Так вы сможете искать либо все вариации, либо вариации конкретных товаров.

     .. hint::

         Если вы воспользуетесь этим способом, то сможете отредактировать несколько вариаций одновременно. Для этого отметьте нужные вариации галочками, нажмите на кнопку с изображением шестерёнки в правой верхней части страницы и выберите действие **Редактировать выбранные**.

   * Найдите нужный настраиваемый товар (лучше всего воспользоваться **Расширенным поиском**), нажмите на название товара и перейдите на вкладку **Вариации товара**.

   .. fancybox:: img/list_of_variations.png
       :alt: На списке вариаций есть некоторые из свойств вариации.

#. Когда вы увидите список вариаций, вы сможете:

   * Изменить цену, рекомендованную цену, количество на складе и статус вариации.

   * Нажать на название вариации, чтобы открыть страницу редактирования, где можно изменить :doc:`другие свойства товара <product_attributes>`.

#. Когда вы закончите редактирование, нажмите кнопку **Сохранить** в правом верхнем углу.

   .. fancybox:: img/variation_properties.png
       :alt: Вариации товара в панели администратора очень похожи на отдельные товары.

=======================
Удалить вариации товара
=======================

#. Откройте страницу **Товары → Товары** в панели администратора и найдите вариацию, которую нужно удалить. Есть несколько способов найти вариацию:

   * Найдите настраиваемый товар, нажмите на его имя и переключитесь на вкладку **Вариации товара**.

   * Найдите вариацию товара с помощью ссылки **Расширенный поиск** в меню поиска справа. Так вы сможете искать все вариации, или вариации только определённых товаров.

#. Наведите курсор мыши на вариацию, которую хотите удалить. Появится кнопка с изображением шестерёнки. Нажмите на неё и выберите действие **Удалить**.

   .. hint::

       Если вы искали вариации с помощью **Расширенного поиска**, то сможете удалить сразу несколько вариаций. Для этого отметьте галочками нужные вариации, нажмите на кнопку с изображением шестерёнки в правой верхней части страницы и выберите действие **Удалить выбранные**.

   .. fancybox:: img/delete_variation.png
       :alt: Можно удалить несколько вариаций товара, но только если вы нашли их с помощью расширенного поиска, а не на вкладке "Вариации товара".
