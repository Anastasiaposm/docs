****************************************************
Как импортировать настраиваемые товары и их вариации
****************************************************

.. note::

    Возможность создавать вариации товаров через импорт впервые появилась в CS-Cart 4.7.2. Функциональность вариаций является частью :doc:`соответствующего модуля </user_guide/addons/product_variations/index>`.

Во время :doc:`импорта товаров </user_guide/manage_products/import_export/product_import>` вы можете создавать и обновлять :doc:`настраиваемые товары и их вариации </user_guide/manage_products/products/simple_versus_configurable>`. Вариации импортируются отдельными записями том же CSV-файле, что и настраиваемые товары.

Цель этой статьи — показать, как организовать настраиваемые товары и вариации в импортируемом CSV-файле. В вашем файле будет больше столбцов в таблице (например, с ценами товаров, их количеством, и т.д.).

.. fancybox:: img/variation_import.png
    :alt: Вариации товаров в CSV-файле при импорте.

#. Должен присутствовать столбец :ref:`Product type <import-product-type>`. Значения в нём определяют тип товара:

   * ``P`` — простой товар.

   * ``C`` — настраиваемый товар.

   * ``V`` — вариация настраиваемого товара.

#. Если вы импортируете вариации, то в импортируемом файле должен быть настраиваемый товар, к которому эти вариации относятся.

   Важен порядок записей относительно друг друга: сначала идёт запись о настраиваемом товаре, а сразу за ней, в последующих строках — записи о вариациях.

   .. note::

       Если между вариациями окажется запись с простым товаром (т.е. последовательность записей *CVPV*, а не *PCVV* или *CVVP*), то при импорте будет выдана ошибка.

#. Как и обычно, значения в столбце :ref:`Product code <import-product-code>` при импорте определяют, есть ли в магазине такой товар или вариация. Если товар или вариация с указанным кодом найдены в магазине, то импорт не создаст новый товар, а обновит существующий.

#. Вариации основаны на :doc:`опциях товаров </user_guide/manage_products/options/index>`. Поэтому у настраиваемого товара обязательно должно быть заполнено поле :ref:`Options <import-options>` в следующих случаях:

   * Настраиваемый товар ещё не существует в магазине и будет создан во время импорта.

   * Настраиваемый товар уже существует в магазине, но у него пока нет опций и вариаций.

   .. note::

       Если настраиваемый товар существует, и у него есть хотя бы одна вариация, тогда значение из поля **Опции** не будет импортировано для этого товара.

#. Для каждой вариации должно быть задано значение в поле :ref:`Variation options <import-variation-options>`. Это информация о том, из каких вариантов опций состоит эта вариация. Здесь важно помнить два правила:

   * Задать *Variation options* можно только для вариации.

   * Значение *Variation options* у двух вариаций одного и того же товара не может быть одинаковым.
