**************************************************************
Как отключить перерасчет промо-акций при редактировании заказа
**************************************************************

.. important::

    Возможность отключить перерасчет промо-акций впервые появилась в **CS-Cart 4.5.1**.

При :doc:`редактировании заказа </user_guide/orders/actions_on_orders/order_details>` в CS-Cart  промо-акции к заказу применяются по тем правилам, которые существуют на момент редактирования заказа:

* Выключенные или уже удаленные промо-акции к заказу не применятся. 

* Включенные промо-акции, созданные уже после размещения заказа, могут примениться, если заказ соответствует условиям промо-акций.

Так работают все версии CS-Cart 4.x.x вплоть до 4.5.1.

Начиная с CS-Cart 4.5.1, можно выбрать, пересчитывать ли промо-акции при редактировании заказа.

.. note::

    При установке CS-Cart 4.5.1 с нуля перерасчет промо-акций уже будет отключен. Вручную отключать его нужно только тем, кто обновляется с более ранних версий.

Чтобы отключить автоматический перерасчет промо-акций после обновления до версии 4.5.1:

1. Перейдите в директорию с установленным CS-Cart.

2. Откройте файл **config.local.php**.

3. Найдите в файле раздел ``$config['tweaks']`` и добавьте туда следующую строку::

    'do_not_apply_promotions_on_order_update' => true,

   В окружении других строк она должна выглядеть примерно так::

     $config['tweaks'] = array (
         '...' => ...,
         '...' => ...,
         'do_not_apply_promotions_on_order_update' => true,
         '...' => ...,
         '...' => ...,
     );

4. Сохраните изменения. Теперь промо-акции не будут пересчитываться при редактировании заказов. Старые промо-акции останутся применены к заказам.
