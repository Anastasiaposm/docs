***********************
Типы опций и исключений
***********************

==================================
Выбор типа опций и типа исключений
==================================

На детальной странице редактирования товара есть секция **"Настройки опций"** с двумя настройками:

* **Тип опций** — имеет 2 возможных варианта: 

  * **Одновременно** — все опции появляются одновременно (все значения заполнены), и пользователь может выбирать варианты в любом порядке. По умолчанию выбран именно этот тип.

  * **Последовательно** — варианты опций будут выбираться последовательно. Сначала пользователь выбирает вариант для первой опции из списка, потом для второй, и т.д.

  .. note::

      При последовательных опциях важна позиция опций относительно друг друга. Ее можно изменить на странице редактировании опции в поле **Позиция**.

* **Тип исключений** — имеет 2 возможных варианта: 

  * **Запрещение** — запрещающий тип исключений. При этом типе все создаваемые исключения считаются запрещающими. Т.е. пользователь не сможет выбрать созданную комбинацию. По умолчанию всегда стоит *Запрещение*.

  * **Разрешение** — разрешающий тип исключений. При этом типе наоборот, пользователь сможет выбрать только исключения, которые были созданы администратором.

  .. note::

      Последовательные опции не имеют особого смысла без **исключений**.

Для облегчения восприятия на странице опций кнопка добавления исключений меняет свое название в зависимости от типа выбранных исключений.

При создании исключений, возможны следующие варианты:

.. list-table::
    :header-rows: 1
    :widths: 10 15
    
    *   -   Значение 
        -   Вариант опции
    *   -   Можно выбрать любой вариант
        -   Любой выбранный вариант опции будет частью исключения.
    *   -   Нельзя выбрать ни один из вариантов
        -   Эта опция будет недоступна, если остальные условия совпадут.
 
-----------------
Пример исключений
-----------------

Допустим мы создаем кроссовки с двумя опциями: 

* *Размер:* 41, 42, 43; 

* *Цвет:* черный/желтый, синий, хаки. 

  При этом, *43* размер не может быть из выбранных цветов, а имеет свою уникальную фирменную расцветку. К тому же у нас кончились все кроссовки с цветом *хаки*.

Таким образом, мы должны будем создать следующие исключения (запрещающие): 

* *Размер: 43; Цвет: "Нельзя выбрать ни один из вариантов"*. Это означает, что если будет выбран *43* размер, то поле *"Цвет"* будет недоступно.

* *Размер: "Можно выбрать любой вариант"; Цвет: Хаки*. Тем самым мы ставим запрещающее условие: если выбран цвет *Хаки*, и любой размер, пользователь не сможет добавить товар в корзину.

===============
Поведение опций
===============

В настройках у каждой опции добавилось поле **"Если отсутствуют варианты"** с двумя возможными вариантами:

* **Показывать сообщениe** — при попадании опции в исключение вместо значений будет показано поле *N/A*. Если опция была *Обязательной* — товар невозможно будет добавить в корзину. 

* **Скрыть опцию полностью** — при попадании опции в исключение, она будет полностью спрятана вместе с заголовком. Если опция была *Обязательной* — товар можно свободно добавить в корзину.

======================
Особенности исключений
======================

----------------
Глобальные опции
----------------

Глобальные опции имеют все те же возможности, что и обычные (не важно, применены они как ссылки или нет). Они также могут участвовать в создании комбинаций и исключений.

-------------------------------------------
Добавление, удаление и редактирование опций
-------------------------------------------

Если для товара уже были созданы комбинации и исключения, то создание или удаление опций не приведет к их автоматическому пересчету. Для корректной работы рекомендуется переделать добавленные комбинации и исключения.

Это не относится к вариантам опций, которые можно создавать и удалять без ограничений. Это относится именно к опциям.

В случае добавления новой опции, во всех исключенях эта опция становится в значение *"Можно выбрать любой вариант"*.

------------------------------------
Типы опций, доступные для исключений
------------------------------------

Не все опции могут быть в составе исключений, а также в составе комбинаций опций. 

Опции типа *"Список вариантов"*, *"Радиогруппа"* и *"Флажок"* используются при составлении исключающих или разрешающих правил.

Опции типа *"Файл"*, *"Текст"*, *"Текстовая область"* — не могут.

Это связано с тем, что первая группа опций имеет строго определенные значения, по которым можно составить исключающее или разрешающее правило.

Вторая группа опций может иметь совершенно разные значения и составить по ним исключающее правило невозможно.
