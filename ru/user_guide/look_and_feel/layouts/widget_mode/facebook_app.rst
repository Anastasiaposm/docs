*************************************************
Как встроить магазин CS-Cart на страницу Facebook
*************************************************

.. note::

    Описанный в статье модуль работает только с CS-Cart/Multi-Vendor 4.8.2 и более новыми версиями. Вашему магазину понадобится действующий SSL-сертификат; после установки сертификата откройте страницу **Настройки → Настройки безопасности** и выберите у настройки **Безопасное соединение для витрины** вариант *Включить для всего сайта*.

Магазин на CS-Cart или Multi-Vendor можно встроить на страницу Facebook. Для этого понадобится создать собственное приложение на Facebook и установить в магазин модуль, который свяжет магазин с приложением. После того, как вы настроите приложение и модуль, магазин появится на указанной странице в Facebook и сможет принимать заказы.

.. fancybox:: img/embedded_store_in_facebook.png
    :alt: Магазин на CS-Cart на странице Facebook.

.. note::

    У нас есть `демо-магазин на Facebook <https://www.facebook.com/CSCartRu/app/457462450989458/>`_. Мы там ничего не продаём, но зато видно, как работает встраивание магазина.

==========================================
Шаг 1. Устанавливаем модуль Facebook Store
==========================================

1.1. Модуль **Facebook store** бесплатен, но не поставляется вместе с CS-Cart, а доступен `на GitHub <https://github.com/cscart/addon-facebook-store>`_. Вот `прямая ссылка на архив с модулем <https://github.com/cscart/addon-facebook-store/archive/master.zip>`_. Можете либо скачать модуль себе на устройство, либо просто скопировать ссылку.

1.2. Установите модуль, :doc:`как описано в инструкции </user_guide/addons/1manage_addons>`; при установке можете либо загрузить модуль на сервер со своего компьютера, либо просто ввести ссылку из пункта 1.1.

1.3. Модуль **Facebook store** появится в списке установленных. Найдите модуль и нажмите на его название, чтобы открыть настройки.

.. fancybox:: img/facebook_store_settings.png
    :alt: Настройки модуля Facebook Store в CS-Cart.

* **App ID** нужно ввести самостоятельно; это идентификатор приложения, он берётся из вашего приложения на Facebook. Приложение мы будем создавать в шаге 2.

* **Page ID** заполнится автоматически после того, как вы всё настроите. Это идентификатор страницы, на которую будет добавлена вкладка с магазином.

* **Widget layout ID** можно выбрать уже сейчас. Это :doc:`макет </user_guide/look_and_feel/layouts/index>`, который будет использоваться для вашего магазина в Facebook.

* **Secure Page Tab URL** и **Facebook Web Games URL (https)** нужно будет вставить в соответствующие поля в настройках вашего приложения на Facebook.

Чтобы модуль заработал, вам понадобится задать все настройки и нажать кнопку **Сохранить**. В шаге 2 расписано, как и в каком порядке всё делать. Можете пока оставить страницу с настройками открытой.

=========================================
Шаг 2. Настраиваем приложение на Facebook
=========================================

2.1. `Создайте своё приложение на Facebook. <https://developers.facebook.com/apps/>`_ Назвать его можно как угодно.

2.2. Сразу после создания вы попадёте на страницу приложения. ID приложения будет в самом верху страницы; скопируйте его и вставьте в настройки модуля **Facebook store** в поле **App ID**.

2.3. В приложении на Facebook перейдите в раздел **Настройки > Основные**:

* В поле **Пространство имён** введите название, которое будет отображаться в ссылке на приложение; покупатели эту ссылку не увидят. Например, мы ввели *embedding-test*.

* В поле **Домены приложений** введите домен вашего магазина.

.. fancybox:: img/basic_app_settings.png
    :alt: Базовые настройки приложения в Facebook.

2.4. В самом низу формы нажмите кнопку **Добавить платформу** и выберите **Вкладка страницы**. После этого в приложение добавится ещё одна секция с настройками:

* Из настроек модуля скопируйте значение **Secure Page Tab URL** и вставьте его в поле **Безопасный URL-адрес вкладки Страницы** на стороне Facebook.

* Введите желаемое название вкладки страницы в соответствующее поле. Это название увидят покупатели на вашей странице в Facebook.

.. fancybox:: img/page_tab_settings.png
    :alt: Настройки вкладки страницы в приложении Facebook.

2.5. Ещё раз нажмите **Добавить платформу** и выберите **Веб-игры на Facebook**. После этого в приложение добавится ещё одна секция с настройками:

* Из настроек модуля скопируйте значение **Facebook Web Games URL (https)** и вставьте его в поле **URL веб-игр на Facebook (https)** на стороне Facebook.

* Остальные настройки для этой платформы можно выключить.

.. fancybox:: img/web_games_settings.png
    :alt: Настройки веб-игры в приложении Facebook.

2.6. Сохраните изменения в настройках модуля и в приложении, а затем в отдельной вкладке браузера перейдите по ссылке из поля **URL Страницы веб-игр Facebook** из настроек приложения на Facebook.

2.7. На открывшейся странице нажмите кнопку **Select page**, если у вас уже есть страница в Facebook, куда нужно добавить вкладку.

.. hint::

    Если страницу вы пока не создали, то сначала создайте её `по ссылке <https://www.facebook.com/pages/create/>`_.

.. fancybox:: img/select_page_for_store.png
    :alt: Выбор страницы в Facebook, на которую встраиваем магазин.

2.8. Выберите нужную страницу из выпадающего списка и нажмите кнопку **Добавить страницу в закладке**. После этого магазин появится на вашей странице в Facebook, а в настройках модуля **Facebook Store** в CS-Cart автоматически заполнится поле **Page ID**.

.. fancybox:: img/add_page_tab.png
    :alt: Выбор страницы в Facebook, на которую встраиваем магазин.

==========================================
Шаг 3. Настраиваем внешний вид на Facebook
==========================================

Порядок вкладок на странице Facebook можно изменить. Делается это перетаскиванием на стороне Facebook в настройках страницы (меню **Настройки > Редактировать страницу**).

.. fancybox:: img/facebook_order_of_tabs.png
    :alt: Порядок вкладок на странице Facebook.

Внешний вид магазина на Facebook можно также менять из панели администратора CS-Cart:

* Страница **Дизайн → Темы** позволяет менять визуальное оформление магазина: цвета, шрифты и пр.

* Страница **Дизайн → Макеты** позволяет менять :doc:`блоки </user_guide/look_and_feel/layouts/blocks/index>` на витрине. 

  .. note::

     Если для магазина на Facebook используется :doc:`макет по умолчанию </user_guide/look_and_feel/layouts/widget_mode/index>`, то изменения в этом макете повлияют и на основной магазин.

У темы **Responsive** есть встроенный стиль Facebook. Он создан для того, чтобы магазин вписывался в дизайн социальной сети.

.. fancybox:: img/facebook_style.png
    :alt: Магазин на CS-Cart, стилизованный под Facebook.
