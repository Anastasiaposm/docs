QIWI SOAP
---------

Описание
========

.. important:: Устаревший способ оплаты по SOAP-протоколу. Рекомендуем использовать :doc:`Qiwi REST <qiwi_rest>`

Большой выбор способов оплаты поможет зарабатывать больше

*Пользователь сможет выбрать самый удобный для себя способ оплаты ваших товаров и услуг*

Официальный сайт: |link|

.. |link| raw:: html

   <!--noindex--><a href="https://ishop.qiwi.com/public/desc.action" target="_blank" rel="nofollow">ishop.qiwi.com</a><!--/noindex-->

Доступные способы оплаты:

*   Банковские карты  
*   Платежные терминалы
*   Со счёта мобильного телефона 
*   Интернет-банкинг       
*   Кошелек QIWI

.. note:: Ограничение по сумме заказа 15000 рублей для неавторизованных в системе QIWI покупателей.

Настройка на стороне Qiwi
=========================

1.  Зарегистрируйте интернет-магазин в системе QIWI.

2.  Перейдите в раздел Настройки - Протоколы - SOAP-протокол.

3.  Сгенерируйте новый ID.

4.  Включите "Настройки SOAP протокола" и "Включить уведомления".

5.  В поле "URL для оповещения" укажите (HTTPS протокол).

    ``http://cscart.wolf10.ru/app/payments/qiwi.php?parameter=update``

6.  Для "Тип уведомлений" выберите "SoapNotifyType.MD5 - простая подпись"

Настройка в магазине
====================

1.  Создайте новый способ оплаты в панели администратора (:doc:`Способы оплаты <adding_payment>`).

2.  Выберите процессор оплаты "QIWI" в окне редактирования способа оплаты.

    .. fancybox:: img/qiwi_select.png
        :alt: QIWI

3.  Пройдите во вкладку "Настроить" нового способа оплаты и выполните настройку.

    .. fancybox:: img/qiwi_settings.png
        :alt: QIWI

    Доступные настройки:

    .. list-table::
        :header-rows: 1
        :stub-columns: 1
        :widths: 10 30

        *   -   API ID
            -   Идентификатор пользователя, который показывается при генериации нового ID

        *   -   Пароль
            -   Пароль, который показывается при генериации нового ID

        *   -   Выберите тип уведомления покупателя

            -   Список с выбором:

                *   Не уведомлять
                *   СМС
                *   Звонок

                .. hint::

                    **Внимание!** Рассылка уведомлений платная и доступна только магазинам, зарегистрированным по схеме "Именной кошелёк"

        *   -   Выберите время жизни счёта
            -   1 час, 12 часов, 1 день, неделя, две недели, месяц

        *   -   Сервер QIWI
            -   Два сервера на выбор

4. Проверьте работу создав тестовый заказ.

    .. hint::

        Для корректной работы QIWI-кошелька требуется установленный модуль PHP-SOAP. Вы можете уточнить наличие данного модуля у администратора сервера.

Как это работает
================

Покупатель сможет выбрать метод оплаты QIWI, на странице оформления заказа. Покупателю будет предложено ввести номер мобильного телефона, на который будет создан счёт в личном кабинете QIWI покупателя. Если у него нет аккаунта QIWI, то он будет создан. Покупатель оплачивает счёт удобным ему способом, в течении срока действия счёта, который вы устанавливаете.

.. image:: img/qiwi_use.png
    :alt: Qiwi
