************
Яндекс.Касса
************

==============
Принцип работы
==============

#. На странице оформления заказа у вас в магазине покупатель выбирает способ оплаты "Яндекс.Касса" (или как вы его назовёте).

#. При нажатии кнопки "Оформить заказ" он попадает на страницу Яндекс.Кассы, и уже там выбирает `подходящий способ оплаты <https://kassa.yandex.ru/help/payments/accept-methods.html>`_. 

   .. note::

       Такой принцип работы описан на сайте Яндекс.Кассы как `"Сценарий 1: Выбор способа оплаты на странице Кассы" <https://kassa.yandex.ru/pay_by_yandex/#1>`_. Его преимущество в том, что `когда Яндекс.Касса добавит новые способы оплаты, то и вы сможете их быстро добавить <https://kassa.yandex.ru/help/payments/accept-methods.html#accept-methods__adding-new>`_.

=========
Настройка
=========

.. important::

    Для работы с Яндекс.Кассой `на вашем сервере должен быть установлен SSL-сертификат <https://kassa.yandex.ru/tech/ssl.html>`_. Можно использовать самоподписанный сертификат.

#. :doc:`Установите модуль </user_guide/addons/1manage_addons>` **Яндекс.Касса**.

#. `Подключите ваш интернет-магазин к Яндекс.Кассе. <https://money.yandex.ru/joinups/?cms_name=cscart>`_

#. :doc:`Создайте новый cпособ оплаты <adding_payment>` с процессором *Яндекс.Касса*.

#. Пройдите на вкладку "Настройки" нового способа оплаты и выполните настройку:

   * **URL для уведомлений** — скопируйте его отсюда в настройки магазина в личном кабинете Яндекс.Кассы. Так Яндекс.Касса будет знать, куда сообщать о транзакциях.

   * **shopId** и **секретный ключ** — возьмите их из личного кабинета Яндекс.Кассы и скопируйте сюда. Так Яндекс.Касса поймёт, кому полагаются деньги, заплаченные клиентом.

   * **Отправлять данные для чеков в Яндекс.Кассу (54-ФЗ)** — включите эту настройку, если за взаимодействие с онлайн-кассой у вас отвечает Яндекс.Касса.

     .. important::

         У нас есть отдельная инструкция, :doc:`как передавать данные для чека из CS-Cart в Яндекс.Кассу, чтобы соответствовать 54-ФЗ <yandex_54fz>`.

   * **Статус заказа для формирования итогового чека** — статус заказа, когда покупатель получил то, за что заплатил. Когда заказ получает этот статус, Яндекс.Касса сформирует чек зачёта предоплаты.

   * **Валюта** — выберите валюту, которая используется в учётной записи Яндекс.Кассы. Она должна совпадать с базовой валютой в вашем магазине.

#. Нажмите кнопку **Создать**.

Связанные статьи
================

.. toctree::
    :maxdepth: 2
    :titlesonly:
    :glob:

    yandex_54fz

.. toctree::
    :maxdepth: 2
    :hidden:

    mws
