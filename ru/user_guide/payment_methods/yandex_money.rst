Яндекс.Касса
------------

Универсальное решение для интернет-магазинов — подключитесь и принимайте платежи разными способами.

Официальный сайт: |link|

.. |link| raw:: html

   <!--noindex--><a href="https://money.yandex.ru/start/" target="_blank" rel="nofollow">Яндекс.Деньги для интернет-магазина</a><!--/noindex-->

Яндекс.Касса включает самые популярные способы приема оплаты:

.. list-table::
    :stub-columns: 1
    :widths: 10 30

    *   -   Банковские карты
        -   Visa (включая Electron), MasterCard и Maestro любого банка мира.
    *   -   Электронные деньги
        -   Яндекс.Деньги, WebMoney, QIWI Wallet
    *   -   Наличные
        -   Через терминалы и салоны связи — более `170 тысяч пунктов`_.

            .. _`170 тысяч пунктов`: https://money.yandex.ru/pay/doc.xml?id=526209

    *   -   Баланс телефона
        -   Билайн, МегаФон, МТС.
    *   -   Интернет-банкинг
        -   Сбербанк Онлайн, Альфа-Клик, MasterPass, Промсвязьбанк

Дополнительные возможности
==========================

Терминал для смартфона

Бизнес выходит за пределы интернета? Получите карманный ридер, который с легкостью заменяет обычный POS-терминал.

Скачайте бесплатное приложение и вставьте ридер в аудиоразъём смартфона или планшета — готово.
Можно принимать к оплате банковские карты в такси, при курьерской доставке или в любой другой ситуации.

Создание способа оплаты
=======================

.. note::

    Для успешной работы с системой Яндекс.Касса на Вашем сервере должен быть установлен SSL-сертификат. Допускается использование самоподписанного сертификата.


#. Подключите ваш интернет-магазин к системе Яндекс.Касса (`Подключить <https://money.yandex.ru/joinups/?cms_name=cscart>`_).

   Информация для анкеты регистрации:

   * CMS: CS-Cart

   * paymentAvisoURL:

     ``https://ваш_домен/index.php?dispatch=payment_notification.payment_aviso&payment=yandex_money``

   * checkURL:

     ``https://ваш_домен/index.php?dispatch=payment_notification.check_order&payment=yandex_money``

   * failURL:

     ``https://ваш_домен/index.php?dispatch=payment_notification.error&payment=yandex_money``

   * successURL:

     ``https://ваш_домен/index.php?dispatch=payment_notification.ok&payment=yandex_money``

#. Создайте новый :doc:`cпособ оплаты <adding_payment>`.

#. Выберите процессор "Яндекс.Касса" в окне редактирования способа оплаты.

   .. fancybox:: img/yandex_select.png
       :alt: Выберите процессор Яндекс.Касса.

#. Пройдите во вкладку "Настройки" нового способа оплаты и выполните настройку.

   .. important::

       У нас есть отдельная инструкция, :doc:`как передавать данные для чека из CS-Cart в Яндекс.Кассу, чтобы соответствовать 54-ФЗ <yandex_54fz>`.

   .. fancybox:: img/yandex_settings.png
       :alt: Настройки способа оплаты с процессором Яндекс.Касса.

Доступные настройки
===================

* Информация — информация которая пригодится для регистрации интернет-магазина и работы с Яндекс.Кассой.

  * paymentAvisoURL:

    ``https://ваш_домен/index.php?dispatch=payment_notification.payment_aviso&payment=yandex_money``

  * checkURL:

    ``https://ваш_домен/index.php?dispatch=payment_notification.check_order&payment=yandex_money``

  * failURL:

    ``https://ваш_домен/index.php?dispatch=payment_notification.error&payment=yandex_money``

* Настройки:
    
  * Тестовый/реальный режим.

  * ShopID — предоставляется при регистрации интернет-магазина в системе Яндекс.Касса;

  * SCID — предоставляется при регистрации интернет-магазина в системе Яндекс.Касса;

  * MD5 shopPassword — необходим при регистрации интернет-магазина. Вы можете сгенерировать md5 с помощью кнопки "Сгенерировать".


* Настройка Merchant Web Services (MWS) (:doc:`подробная инструкция <mws>`):

  * Файл сертификата

  * Пароль

  * Отложенные платежи включены

  * Статус отложенных заказов (заказы, ожидающие подтверждения)

  * Статус подтвержденных заказов

  * Статус отмененных отложенных заказов

  * Включить возврат

  * Статус возвращенных заказов

  .. `подробная инструкция`: mws.rst


* Способы оплаты:

  * Яндекс.Деньги

  * Банковская карта

  * Терминал

  * Мобильный телефон

  * WebMoney

  * Альфа-Клик

  * Сбербанк онлайн

  * MasterPass

  * ПромСвязьБанк

.. hint::

    Доступно несколько принципов работы исходя из настроек сектора "Способы оплаты":

    * Если Вы отметите один способ оплаты, то при оплате, покупатель будет сразу направлен на страницу оплаты "Яндекс.Касса" с данным способом оплаты. Таким образом Вы можете создать несколько различных способов оплаты ("Кредитная карта" , "Яндекс.Деньги", "WebMoney" и т.д.) используя один процессор "Яндекс.Касса".

    * Если Вы отметите несколько способов оплаты, то они будут доступны в списке для выбора покупателем на странице оформления заказа.

    * Если Вы не отметите ни одного способа оплаты, то покупатель сможет сам выбрать удобный способ оплаты после перехода на сайт Яндекс.Деньги.

Результат
=========

.. image:: img/yandex_03.png
    :align: center
    :alt: Оформление заказа со способами оплаты от Яндекс.Кассы.

Связанные статьи
================

.. toctree::
    :maxdepth: 2
    :titlesonly:
    :glob:

    mws
    yandex_54fz
