******************
Карты и геолокация
******************

.. note::

    Этот модуль впервые появился в версии 4.10.1.

.. contents::
   :backlinks: none
   :local:

===========
Возможности
===========

#. Карты от Google или Яндекса для следующих страниц:

   * оформление заказа

   * профиль покупателя

   * информация о заказе

   * список магазинов и пунктов самовывоза :doc:`из соответствующего модуля </user_guide/addons/stores_and_pickup_points/index>`

   .. fancybox:: img/map_of_stores.png
       :alt: Карты от Яндекса не требуют API-ключа, но перестанут работать до конца дня, если превысить дневной лимит запросов.

#. Автоматическое определение города покупателя и возможность выбрать другой город через :doc:`блок </user_guide/look_and_feel/layouts/blocks/index>` **Местоположение покупателя**. Определившийся или выбранный город (а также соответствующая ему страна и область) будет использоваться при оформлении заказа.

#. (опционально) Оценка стоимости и сроков доставки на странице товара в зависимости от местоположения покупателя.

   .. fancybox:: img/shipping_estimation.png
       :alt: Доступность способа доставки зависит от местоположения и определяется автоматически.

=========
Настройка
=========

Модуль **Карты и геолокация** :doc:`устанавливается так же, как любой другой модуль </user_guide/addons/1manage_addons>`. Нажмите на название установленного модуля, и откроются его настройки:

* **Провайдер** определяет, какой сервис карт и геолокации используется в вашем магазине:

  * **Яндекс** выбран по умолчанию. Вводить API-ключ необязательно; он нужен, если вы используете `платную версию API <https://tech.yandex.ru/maps/commercial/>`_.

  * **Google** можно выбрать вместо Яндекса. Но чтобы карты и геолокация заработали, понадобится `создать себе ключ API на сайте Google <https://cloud.google.com/maps-platform/>`_.

    .. note::

        Выберите проекты **Maps** и **Places** или вручную включите *Geocoding API*, *Places API*, *Maps JavaScript API*, *Geolocation API* и *Maps Static API*.

  Когда вы получите ключ API, просто введите его на соответствующей вкладке в настройках модуля и сохраните изменения.

* **Показать стоимость и сроки доставки на страницах товаров** делает то, что написано: если включить настройку, на страницах товаров появятся стоимости и сроки для доступных способов доставки в зависимости от местоположения покупателя.
