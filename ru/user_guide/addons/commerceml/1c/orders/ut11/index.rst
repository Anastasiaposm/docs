**************************************************
Обмен заказами между интернет-магазином и 1С УТ 11
**************************************************

Здесь описан процесс обмена заказами между интернет-магазином на платформе CS-Cart и 1С Управление торговлей 11. Аналогичным образом можно настроить обмен с другой версией 1С.

.. note::

    В зависимости от версии, некоторые настройки могут быть видоизменены или отсутствовать. По поводу настроек на стороне 1С обратитесь к администратору 1С.

#. Откройте базу данных, с которой будет производиться обмен.

   .. fancybox:: img/order1c_001.png
       :alt: Обмен заказами 1C и CS-Cart

#. Проверьте настройки 1С (см. :doc:`настройки обмена <../../instruction/ut11/index>`).

#. Создайте типовое соглашение (см. :doc:`настройки обмена <../../instruction/ut11/index>`).

#. Создайте узел обмена: 

   * В основных настройках узла включите настройку "Обмен заказами".

     .. fancybox:: img/order1c_002.png
         :alt: Обмен заказами 1C и CS-Cart

   * Во вкладке "Обмен заказами" выполните настройку:

     * "Дата заказа на сайте" — укажите, в какой реквизит будет выгружаться дата создания заказа. 

         Чтобы создать реквизит:

         * Откройте "Администрирование → Общие настройки".

         * В окне "Общие настройки" нажмите на ссылку "Дополнительные реквизиты".

           .. fancybox:: img/order1c_003.png
               :alt: Обмен заказами 1C и CS-Cart

         * В окне "Дополнительные реквизиты" перейдите в папку "Заказ клиента" и создайте дополнительный реквизит: в правом верхнем углу нажмите "Все действия" → "Добавить" → "Новый". Для реквизита "Дата заказа на сайте" обязательно должен быть задан тип "Дата".

           .. fancybox:: img/order1c_004.png
               :alt: Обмен заказами 1C и CS-Cart

     * "Номер заказа на сайте" — создайте реквизит для значения номера заказа. Делается это по аналогии с созданием реквизита для "Дата заказа на сайте".

     * "Соглашение" — выберите созданное типовое соглашение.

     * "Организация" — выберите организацию, осуществляющую заказ.

     * "Склад" — выберите склад, используемый при создании заказа в 1С.

     * "Менеджер" — выберите менеджера, который будет использоваться при создании заказа в 1С.

     * "Способ поиска существующих элементов справочника Контрагенты" — определяет, по каким данным будет осуществляться поиск контрагентов. Выберите способ поиска "По наименованию", если данные контрагента в выгружаемых заказах из интернет-магазина не содержат ИНН и КПП.

     * "Вид номенклатуры для товаров" — вид номенклатуры, используемый при создании заказа в 1С.

     * "Вид номенклатуры для услуг" — вид номенклатуры услуг, используемый при создании заказа в 1С.

     * "Единица измерения" — единица измерения товаров, используемая при создании заказа в 1С.

     * "Группа номенклатуры" — группа, в которую будут добавляться товары из интернет-магазина, выгружаемые в заказе.

     * "Причина отмены заказа" — причина, присваиваемая отмененным заказам.

     * "Соответствие статусов заказов в информационной базе и на сайте" — таблица для указания соответствия статусов заказа интернет-магазина и 1С.

       .. warning::

           Не указывайте соответствие статусов заказа: данная функциональность не реализована до конца на стороне 1С. Если вы укажете соответствие статусов, то заказы с данными статусами не будут загружаться в 1C.

    .. fancybox:: img/order1c_005.png
        :alt: Обмен заказами 1C и CS-Cart

    .. fancybox:: img/order1c_006.png
        :alt: Обмен заказами 1C и CS-Cart