************************************
Выгрузка характеристик товаров из 1С
************************************

.. important::

    То, что в 1С называется характеристиками, в CS-Cart называется опциями.

Способ выгрузки характеристик товаров из 1C в опции задаётся на стороне CS-Cart в настройках модуля **CommerceML** на вкладке **Настройка опций**. Есть несколько способов выгрузки:

* **Вариации (рекомендуемое значение)** — оптимальный вариант для товаров с разными ценами в зависимости от опций. Характеристики выгрузятся как вариации товара. Каждая вариация — это отдельный товар со своей ценой, изображениями, и пр.

  .. note::

      Этот способ работает только со схемой версии 2.05 и при включенном модуле :doc:`"Вариации товаров" </user_guide/addons/product_variations/index>`.

* **Комбинация из одной опции (цена в модификаторах)** — все характеристики товара в 1С будут объединены на стороне CS-Cart в одну опцию с несколькими вариантами вида *"Размер: 12, Цвет: Белый"*. 

  Цена самого товара будет равна нулю, но у каждого варианта опции на стороне CS-Cart будет своя цена. Она будет указана через модификатор цены этого варианта.

* **Комбинация из одной опции (общая цена)** — все характеристики товара в 1С будут объединены на стороне CS-Cart в одну опцию с несколькими вариантами. Цена товара будет взята из последней импортируемой комбинации.

  .. note::

      Этот способ появился в CS-Cart 4.7.3.

* **Комбинация из опций (цена не импортируется)** — характеристики товара импортируются из 1С как отдельные опции в CS-Cart (например, *"Размер: 12"* и *"Цвет: Белый"*), и на их основе создаются комбинации. Цена у комбинаций и товара обновлена не будет.

* **Комбинация из опций без модификаторов (одинаковая цена)** — характеристики товара импортируются из 1С как отдельные опции в CS-Cart, и на их основе создаются комбинации. Модификаторов цены у вариантов опций нет. Цена товара берется из последней импортируемой комбинации.

* **Комбинация из глобальных опций (цена не импортируется)** — характеристики товара импортируются из 1С как глобальные опции в CS-Cart, и на основе них создаются комбинации. Цена у комбинаций и товара не обновляется.

.. contents:: Содержание
    :local: 
    :depth: 3

Добавление характеристики товара на стороне 1С
----------------------------------------------

#. В окне создания новой номенклатуры нажмите на кнопку "..." у поля "Вид номенклатуры".

   .. fancybox:: img/image_02.png
       :alt: Характеристики товаров 1С

#. В открывшемся окне "Виды номенклатуры" нажмите на кнопку "Создать" для создания нового вида номенклатуры с характеристикой.

   .. fancybox:: img/image_03.png
        :alt: Характеристики товаров 1С

#. В окне создания вида номенклатуры заполните поля "Группа доступа" и "Наименование". Поставьте галку у поля "Использовать характеристики" и в выпадающем списке выберите вид характеристики.

   .. fancybox:: img/image_04.png
       :alt: Характеристики товаров 1С

   .. list-table::
       :widths: 15 30

       *   -   Вид характеристики
           -   Описание

       *   -   Общие для вида номенклатуры
           -   Характеристики будут общие для данного вида товара, т.е. один раз создаете характеристики для этого вида, а потом используете для любой номенклатуры этого вида.

       *   -   Индивидуальные для номенклатуры
           -   Для каждой номенклатуры этого вида придется создавать характеристики индивидуально.

#. После заполнения всех полей нажмите на кнопку "Сохранить".

#. В этом же окне "Вид номенклатуры" перейдите во вкладку "Дополнительные реквизиты" и добавьте в список "Дополнительные реквизиты характеристик" нажав на кнопку "Добавить" - "Новый Ins".

   .. note::
       Характеристики без реквизитов выгружаться не будут.

   .. fancybox:: img/image_05.png
       :alt: Характеристики товаров 1С

#. В окне "Дополнительный реквизит" заполните поле "Наименование" и добавьте дополнительные значения.

   .. fancybox:: img/image_06.png
       :alt: Характеристики товаров 1С

#. После добавления всех характеристик у созданного вида номенклатуры, перейдите во вкладку "Основное" и нажмите на ссылку "Общие характеристики номенклатуры", если выбран вид характеристики "Общие для вида номенклатуры".

#. В открывшемся окне "Характеристики номенклатуры" нажмите на кнопку "Создать".

   .. fancybox:: img/image_07.png
       :alt: Характеристики товаров 1С

#. В окне регистрации новой характеристики введите "Рабочее наименование" новой характеристики, дополнительные значения (например, Тип, Рисунок) и нажмите на кнопку создать. Аналогичным образом добавьте все необходимые характеристики и их значения.

   .. fancybox:: img/image_08.png
       :alt: Характеристики товаров 1С

#. После  добавления всех необходимых характеристик закройте окно "Характеристики номенклатуры". В окне "Вид номенклатуры" нажмите на кнопку "Записать и закрыть". В окне списка видов номенклатур выберите созданную и нажмите на кнопку "Выбрать". В окне создания номенклатуры нажмите на кнопку "Далее". На следующем шаге заполните обязательные поля "Рабочее наименование" и "Единица хранения". После заполнения всех необходимых полей нажмите на кнопку "Записать".

   .. fancybox:: img/image_09.png
       :alt: Характеристики товаров 1С

#. После записи данная номенклатура появится в списке номенклатур. Выберите созданную номенклатуру и нажмите на кнопку "Редактировать".

   .. fancybox:: img/image_10.png
       :alt: Характеристики товаров 1С

#. В окне редактирования нажмите на ссылку "Характеристики".

   .. fancybox:: img/image_11.png
       :alt: Характеристики товаров 1С

#. В окне "Характеристики номенклатуры" нажмите на кнопку "Создать" для добавления индивидуальных характеристик номенклатуры.

   .. fancybox:: img/image_12.png
       :alt: Характеристики товаров 1С

Добавление цены товарам
-----------------------

#. Для того, чтобы созданные характеристики выгружались в интернет-магазин, необходимо добавить цены товаров. Пройдите в меню "Маркетинг и планирование" нажмите на ссылку "Цены номенклатуры".

   .. fancybox:: img/image_13.png
       :alt: Характеристики товаров 1С

#. В окне "Цен номенклатуры" нажмите на кнопку "Создать" для установки цен товаров.

   .. fancybox:: img/image_14.png
       :alt: Характеристики товаров 1С

#. В окне установки цен номенклатуры выберите цены, которые будут устанавливаться для товара, и нажмите на кнопку "Перейти к установке цен".

   .. fancybox:: img/image_15.png
       :alt: Характеристики товаров 1С

#. Появится окно запроса "Выбрать все зависимые цены?"; нажмите на кнопку "Да", если необходимо задать значения зависимых цен.

   .. fancybox:: img/image_16.png
       :alt: Характеристики товаров 1С

#. На следующем шаге нажмите на кнопку "Добавить" - "Добавить номенклатуру" для добавления номенклатуры и установки для неё цены.

   .. fancybox:: img/image_17.png
       :alt: Характеристики товаров 1С

#. Выберите "Номенклатуру", введите её цены в колонках "Новая цена" и нажмите на кнопку "Провести и закрыть".

   .. fancybox:: img/image_18.png
       :alt: Характеристики товаров 1С

   .. note::

       Если открыть товары, для которых была установлена цена (меню "Продажи" - ссылка "Номенклатуры") и нажать на ссылку "Цены", то у товара должен появиться список установленных цен.

   .. fancybox:: img/image_19.png
       :alt: Характеристики товаров 1С

Обмен характеристиками
----------------------

После ввода всех необходимых данных пройдите в настроенный узел обмена и нажмите на кнопку "Выполнить обмен данными". (см. :doc:`эти статьи </user_guide/addons/commerceml/1c/instruction/index>`).
