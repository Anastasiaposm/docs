*************************************************************
Если администратор не получает на почту уведомления о заказах
*************************************************************

Если администратор не получает на почту уведомления о заказах, то можно сделать следующее:

=================
Проверка настроек
=================

#. Откройте страницу **Настройки → Внешний вид** и проверьте значение настройки **Режим редактирования email-уведомлений**.

   * Если значение **Новый**: откройте страницу **Дизайн → Шаблоны email-уведомлений**, перейдите на вкладку **Уведомления для администратора** и убедитесь, что все нужные шаблоны типа **Статус заказа: X** включены.

   * Если значение **Старый**: откройте страницу **Администрирование → Статусы заказов** и убедитесь, что у :doc:`статусов </user_guide/orders/order_statuses/set_status>`, о которых нужно информировать администраторов, стоит галочка **Уведомить отдел оформления и обработки заказов**.

#. Проверьте, что задан электронный адрес администратора:

   * Откройте страницу **Настройки → Компания**.

   * Убедитесь, что нужный адрес введён в поле **Email отдела оформления и обработки заказов**.

======================================
Проверка, отправляется ли почта вообще
======================================

#. Откройте страницу **Настройки → Электронная почта**. 

#. Дальнейшие действия зависят от того, какой **Способ отправки почты** у вас выбран.

--------------------------
С помощью функции PHP mail
--------------------------

Проверьте, работает ли стандартная функция PHP ``mail`` на вашем сервере:

#. Создайте файл **mail.php** в корневой директории вашей установки CS-Cart.

#. Скопируйте в этот файл следующий код:

   .. code-block :: php

       <?php

       $to      = 'order@domain.com';
       $subject = 'the subject';
       $message = 'hello';
       $headers = 'From: your_email@domain.com' . "\r\n" .
        'X-Mailer: PHP/' . phpversion();

       $result = mail($to, $subject, $message, $headers);
       print $result;

       ?>

   * Замените *order@domain.com* на электронный адрес из поля **Email отдела оформления и обработки заказов**.

   * У тестового письма в поле **От кого:** будет адрес *your_email@domain.com*. 

     Мы рекомендуем также заменить его на email отдела оформления и обработки заказов, так как CS-Cart подставляет именно этот адрес. Кроме того, многие хостинги не позволяют отправить электронные письма, если в поле **От кого:** указан какой-то другой домен, или если адрес заведомо недействителен.

#. Сохраните файл.

#. Запустите скрипт, открыв ссылку: *http://www.your_domain.com/your_cscart_directory/mail.php*. 

   В ссылке замените *your_domain.com* на ваш домен, а *your_cscart_directory* на папку, где установен CS-Cart (если он установлен в папке). Например:

   * *http://example.com/mail.php* (если ваш магазин доступен сразу по адресу *http://example.com*)

   * *http://example.com/store/mail.php* (если ваш магазин доступен по адресу *http://example.com/store*)

   Скрипт попытается отправить письмо от *order@domain.com* на адрес *your_email@domain.com*.

#. Проверьте результаты.

   * Если вы видите **1** после запуска скрипта, это значит, что письмо было отправлено, а стандартная функция PHP ``mail`` работает на сервере правильно. Если письмо при этом не было получено, свяжитесь с администратором вашего почтового сервера, чтобы устранить проблему. Вот несколько возможных причин, почему письмо могло не дойти:

     * Введён неверный адрес получателя.

     * У получателя нет свободного места в почтовом ящике.

     * Получатель не проверял почтовый ящик последние 3 месяца.

     * Размер письма больше, чем максимальный размер, разрешённый сервером.

     * Письмо было принято за спам и попало в папку *Спам* или просто было заблокировано спам-фильтром.

     * Хост отправителя внесён в чёрный список сервера.

   * Если вы видите **0** после запуска скрипта, то это значит, что стандартная функция PHP ``mail`` на сервере не работает. Свяжитесь по поводу этой проблемы с администратором вашего сервера.

-----------------
Через SMTP сервер
-----------------

#. Убедитесь, что в разделе **Настройки → Электронная почта → Настройки SMTP сервера** введены верные данные.

#. Свяжитесь с администратором вашего сервера по поводу этой проблемы.
