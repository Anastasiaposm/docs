***************************
Как создать способ доставки
***************************

#. Откройте страницу **Администрирование → Доставка и налоги → Способы доставки**.

   .. fancybox:: img/shippings_016.png
       :alt: Методы доставки

#. Нажмите кнопку **+** в правой верхней части страницы, чтобы добавить новый способ доставки.

   .. fancybox:: img/shippings_017.png
       :alt: Методы доставки

#. Задайте :doc:`настройки способа доставки </user_guide/shipping_and_taxes/shipping_methods/shipping_method_attributes>`.

#. Нажмите кнопку **Создать**.

==========================
Настройки способа доставки
==========================

Все методы доставки делятся на два типа, в зависимости от вида расчёта тарифа:

* **Ручные:**

  Стоимость доставки рассчитывается в зависимости от ваших настроек в панели администратора. Вы можете создать способ доставки и указать стоимость доставки для различных условий и параметров заказа.

* **В реальном времени:**

  Для расчётов используется сторонний сервис или API метода доставки. Когда покупатель переходит к оформлению заказа, отправляется запрос на сторонний сервис с данными заказа. Если сервис осуществляет доставку по адресу покупателя, то данный способ оплаты будет предложен для выбора.

Для каждого способа доставки доступны следующие настройки:

===============
Вкладка "Общие"
===============

.. fancybox:: img/shippings_018.png
    :alt: Методы доставки

.. list-table::
    :header-rows: 1
    :stub-columns: 1
    :widths: 10 30

    *   -   Настройка

        -   Описание

    *   -   Название

        -   Будет показано покупателю.

    *   -   Иконка

        -   Изображение способа доставки.

    *   -   Время доставки

        -   Будет показано покупателю.

    *   -   Лимит веса (кг)

        -   Способ доставки будет предложен покупателю, если вес заказа будет соответствовать лимиту.

    *   -   Расчет тарифа

        -   Метод расчёта стоимости и сроков доставки:

            +   Ручной

                стоимость рассчитывается исходя из настроек во вкладке "Стоимость доставки".

            +   В реальном времени

                стоимость доставки рассчитывает сторонний сервис. Вкладка "Стоимость доставки" позволяют установить надбавку.

    *   -   Служба доставки

        -   Онлайн сервис или API службы доставки который будет использован для расчёта. Доступно только для служб доставки с расчётом тарифа "в реальном времени".

    *   -   Налоги

        -   Применение налога к стоимости доставки.

    *   -   Группы

        -   Группы пользователей которым будет доступен данный способ доставки. Например, вы можете предлагать специальный тариф или условия для постоянных клиентов.

    *   -   Статус

        -   Вкл./Выкл.

============================
Вкладка "Стоимость доставки"
============================

.. important::

    Необходимо задать стоимость, чтобы способ доставки был предложен покупателю при оформлении заказа.

Настройки обязательны для способов доставки с ручным расчётом тарифа. Для расчёта тарифа "в реальном времени" настройки стоимости не обязательны и используются как надбавка.

Стоимость доставки настраивается в зависимости от адреса покупателя. Для этого используется функционал "Пункты назначения" (см. :doc:`"Пункты назначения" <../locations/index>`). Вам необходимо создать пункты назначения и указать для данных пунктов стоимость доставки.

.. fancybox:: img/shippings_019.png
    :alt: Методы доставки

.. note::

    **(+)** рядом с названием пункта назначения означает, что данный способ доставки будет доступен покупателям, адрес которых, удовлетворяет условиям пункта назначения. В примере: покупателям из Москвы и Санкт-Петербурга.

Стоимость доставки указывается с учётом зависимостей в абсолютных или процентных значениях:

*   Зависимость от цены

*   Зависимость от веса

*   Зависимость от количества

.. fancybox:: img/shippings_020.png
    :alt: Методы доставки

Например:

.. list-table::
    :header-rows: 1
    :stub-columns: 1
    :widths: 10 30

    *   -   Необходимо

        -   Настройка условий

    *   -   Доставка "Курьером" 

            Стоимость 500 рублей.

            При заказе от 3000 рублей - Бесплатно.

        -   Зависимость от цены

            +   Стоимость товаров от 0 рублей → Стоимость 500 рублей.

            +   Стоимость товаров от 3000 рублей → Стоимость 0 рублей.

    *   -   Бесплатная доставка по Москве

        -   Зависимость от цены

            +   Стоимость товаров от 0 рублей → Стоимость 10 рублей.

            +   Стоимость товаров от 10 рублей → Стоимость 0 рублей.

            Таким образом любой заказ будет соответствовать условиям бесплатной доставки.

==========================================
Расчёт тарифа "В режиме реального времени"
==========================================

Вы можете использовать API служб доставки и сервисов расчёта стоимости доставки. 

На странице оформления заказа CS-Cart осуществит запрос на сервер службы доставки. Сервер службы доставки предоставит расчёт стоимости в зависимости от данных заказа (адреса, веса, суммы).

Выберите доступную службу доставки из списка в настройках способа доставки:

.. fancybox:: img/shippings_021.png
    :alt: Методы доставки

Введите необходимые настройки в появившейся вкладке "Настроить".

.. fancybox:: img/shippings_022.png
    :alt: Методы доставки

.. important::

    Настройки индивидуальны для каждого сервиса.

Вкладка "Стоимость доставки" позволяет задать дополнительные надбавки.

Вы можете протестировать работу расчёта "в реальном времени" сразу на странице редактирования способа доставки. Просто введите вес и нажмите кнопку "Тест". Во всплывающем окне вы увидите результат расчёта или сообщение об ошибке.

.. fancybox:: img/shippings_023.png
    :alt: Методы доставки
