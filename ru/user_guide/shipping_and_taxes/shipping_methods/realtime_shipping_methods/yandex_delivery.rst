***************
Яндекс.Доставка
***************

.. epigraph::

   Сервис работает с несколькими курьерскими службами и помогает организовать перевозку товаров из Москвы и Подмосковья во все регионы России.
   Перевозка товаров при работе с Яндекс.Доставкой в среднем стоит столько же, сколько при работе с курьерскими службами напрямую.

   -- |yandex_delivery|

.. |yandex_delivery| raw:: html

    <!--noindex--><a href="https://delivery.yandex.ru/promo/" target="_blank" rel="nofollow">Официальный сайт</a><!--/noindex-->


.. note::

    Модуль находится на стадии разработки. На данный момент реализована доставка в точки самовывоза.


Ключи доступа
=============

1.  Откройте в браузере страницу delivery.yandex.ru и перейдите на страницу настроек:

    .. fancybox:: img/go_to_settings.png
        :alt: переход в настройки

3.  Откройте вкладку "Интеграция" и нажмите на ссылку "получить".

    .. fancybox:: img/get_api_keys.png
        :alt: Получение ключей

4. Скопируйте и вставьте данные в настройки модуля CS-Cart. В первом поле отображаются "Ключи API", а во втором значения "Client ids".

    .. fancybox:: img/copy_api_keys.png
        :alt: Копирование ключей


Настройка модуля
================

1. Установите модуль.

2. В настройках модуля укажите значения, который получили в окне "Получить API-ключи" на сайте delivery.yandex.ru.

    .. fancybox:: img/settings_addon.png
        :alt: Добавление нового способа доставки


Добавление способа доставки
===========================

1. Создайте новый способ доставки (:doc:`см. "Создание способа доставки" </user_guide/shipping_and_taxes/shipping_methods/add_shipping_method>`).

    Настройки нового способа доставки:

    .. list-table::
        :stub-columns: 1
        :widths: 10 30

        *   -   Расчет тарифа
            -   В реальном времени

        *   -   Служба доставки
            -   Яндекс.Доставка

    .. fancybox:: img/add_shipping.png
        :alt: Добавление нового способа доставки

2. Выполните настройку нового способа доставки во вкладке “Настроить”.

    .. fancybox:: img/settings_shipping.png
        :alt: Добавление нового способа доставки

    .. list-table::
        :stub-columns: 1
        :widths: 20 30

        *   -   Отправитель, склад, реквизиты

            -   Ваши данные, которые вы настраиваете на стороне Яндекса.

        *   -   Ширина упаковки, высота упаковки, длина упаковки

            -   Размеры посылки.

        *   -   Сортировка точек самовывоза

            -   Когда покупатель указал адрес доставки, то в списках доступных точек самовывоза доступны самые близкие от него. Это удобно при использовании следующей настройки.

        *   -   Количество отображаемых точек самовывоза

            -   В больших городах много точек самовывоза. Этой настройкой можно ограничить их количество в списке, оставив только ближайшие к клиенту точки самовывоза.

        *   -   Отправить из

            -   Город, из которого Яндекс.Доставка отправит товар. Если ваш склад находится в Московской области, то выберите *Москва*, а если в Ленинградской области, то *Санкт-Петербург*.

        *   -   Тип доставки

            -   Службы доставки, которые покупатель сможет выбрать при оформлении заказа, а администратор — при редактировании заказа. Список доступных служб подгружается в CS-Cart из личного кабинета Яндекс.Доставки.

        *   -   Тип отображения

            -   На данный момент доступен только "Внутренний". Это шаблон отображения карты и выбора доставки.

3. Проверьте работу автоматического расчёта.

    .. fancybox:: img/test.png
        :alt: Проверка


Оформление заказа
=================

1. Добавляем товар в корзину и переходим на оформление заказа.

2. На третьем шаге оформления заказа выбираем способ доставки *Яндекс.Доставка*.

    .. fancybox:: img/all_points.png
        :alt: Добавление нового способа доставки

    .. fancybox:: img/select_point.png
        :alt: Добавление нового способа доставки
