************************
Экспорт в Товары@mail.ru
************************

Описание
========

.. epigraph::

   Товары Mail.Ru – это идеальная рекламная площадка для интернет-магазинов. Ежедневно более 10 миллионов потенциальных покупателей видят товарные предложения проекта в результатах поиска Go.Mail.Ru, на главной странице Mail.Ru, а также на многих портальных проектах. 

   -- torg.mail.ru

Подробную информацию о регистрации интернет-магазина в системе онлайн "Товары@mail.ru" вы можете найти на сайте: |link|.

.. |link| raw:: html

   <!--noindex--><a href="http://torg.mail.ru/info/86/" target="_blank" rel="nofollow">Товары@mail.ru</a><!--/noindex-->


Экспорт ваших товаров в систему Товары@mail.ru осуществляется с помощью модуля "Русская локализация - Экспорт в Товары@mail.ru".

Модуль "Русская локализация - Экспорт в Товары@mail.ru" позволяет подготовить xml прайс-лист для размещения в системе. 

Модуль не экспортирует (исключает):

*   Товары с нулевой ценой.    
*   Товары которых нет в наличие.   
*   Товары у которых выключена категория.


Настройка экспорта в Товары@mail.ru
===================================

Для экспорта данных товаров установите модуль "Русская локализация - Экспорт в Товары@mail.ru". (:doc:`см. Установка модулей </manager/addons/install/index>`).

.. note::

    Панель администратора → Верхнее меню → Модули → Управление модулями → "Русская локализация - Экспорт в Товары@mail.ru".


.. fancybox:: img/image05.png
    :alt: Экспорт в Товары@mail.ru

После установки модуля откройте его настройки. 

Окно "Настройки модуля" содержит вкладки:

*   Общие настройки.

*   Автоматический экспорт.

Общие настройки модуля
----------------------

.. fancybox:: img/image04.png
    :alt: Экспорт в Товары@mail.ru

.. list-table::
    :widths: 20 30

    *   -   Название магазина
        -   Имя магазина используемое при формировании файла в теге ``<shopname>``.

    *   -   Экспортировать только товары, которые есть на складе.
        -   Исключает из экспорта товары с количеством меньшим 0.

    *   -   Включить уведомления о причинах исключения товаров из экспорта.
        -   Отображает уведомления о причинах, по которым товары не были экспортированы.

    *   -   Исключить выключенные категории
        -   Исключает из экспорта товары, категории которых выключены.
		
    *   -   Название товара используемое в прайс-листе
        -   Устанавливает поля используемые для названия товара.

            *   Название товара - устанавливает экспорт поля "Название товара" в тег ``<name>``.
            *   Тип товара+Производитель+Модель - устанавливает экспорт полей "ТМ Группа товаров/категория" тег ``<typePrefix>``, "ТМ Бренд" тег ``<vendor>``, "ТМ Модель" тег ``<model>``.

    *   -   Названия характеристик для использования в поле "vendor"
        -   Содержит список характеристик с типом "Бренд/Производитель"

            Значение характеристики, которое будет записываться в тег ``<vendor>``, если значение поля "ТМ Бренд" у товара пустое. Если выбрано несколько характеристик, то будет взято первое непустое значение.

    *   -   Использовать поле "typePrefix"
        -   Устанавливает выгрузку значения поля товара "ТМ Группа товаров/категория (typePrefix)" в тег ``<typePrefix>``. Если поле товара "ТМ Группа товаров/категория (typePrefix)" пустое, то выгружается значение категории товара.

    *   -   Использовать поле "ТМ Стоимость доставки в домашнем регионе".
        -   Устанавливает использование поля "ТМ Стоимость доставки в домашнем регионе" в теге ``<local_delivery_cost>`` при экспорте товара.

    *   -   Значение нулевой доставки поля "ТМ Стоимость доставки в домашнем регионе"
        -   Указывает значение доставки в домашнем регионе передаваемое в тег ``<local_delivery_cost>``
            Если у товара значение значение поля "ТМ Стоимость доставки в домашнем регионе" равно 0:

            *   Сумма доставки – значение ноль. 
            *   Бесплатная доставка – текст "бесплатная доставка". 
            *   Не отображать – поле local_delivery не будет экспортирован у товаров, которые имеют нулевое значение данной доставки.

    *   -   Кодировка экспортируемого файла
        -   Устанавливает кодировку экспортируемого файла.


.. important::

    Теги ``<vendor>``, ``<model>`` и ``<typePrefix>`` применяются совместно.

Автоматический экспорт
----------------------

.. fancybox:: img/image00.png
    :alt: Экспорт в Товары@mail.ru

Вы можете настроить автоматический экспорт товаров с помощью CRON. 

Файл автоматического экспорта сохраняться в папке: ``/var/files/имя_файла_указанное_в_настройках.xml``. 

Настройки товаров для экспорта
==============================

Модуль добавляет для каждого товара дополнительные поля (настройки), которые необходимы для формирования прайс-листа. 

.. list-table::
    :header-rows: 1
    :stub-columns: 1
    :widths: 15 30

    *   -   Название поля
        -   Описание поля

    *   -   ТМ Бренд
        -   Бренд (производитель) товара, значение поля записывается в тег <vendor>.

    *   -   ТМ Модель
        -   Модель товара, значение поля записывается в тег <model>.

    *   -   ТМ Группа товаров/категория (typePrefix)
        -   Тип товара, значение поля записывается в тег <typePrefix>.

    *   -   ТМ Возможность доставки товара
        -   Устанавливает наличие доставки товара, записывает значение в тег <delivery>.

    *   -   ТМ Возможность зарезервировать товар и забрать его самостоятельно
        -   Устанавливает возможность самовывоза, записывает значение в тег <pickup>.

    *   -   ТМ Максимальная цена клика в рублях
        -   Максимальная цена клика в рублях, которую магазин готов платить за конкретный товар, чтобы занять соответствующее место в листинге. Значение записывается в тег <offer> в параметр cbid.

    *   -   ТМ Экспортировать товар в Товары@mail.ru
        -   Устанавливает экспорт данного товара в файл.

    *   -   Стоимость доставки в домашнем регионе
        -   Стоимость доставки в домашнем регионе, записывает значение в тег <local_delivery_cost>.

Редактирование редактирование настроек товаров возможно тремя способами.

На странице редактирования товара
---------------------------------

1.  Пройдите на страницу "Редактирования товара"

2.  Перейдите во вкладку "Больше" → "Модули" страницы редактирования товара. 

3.  Во вкладке "Модули" заполните необходимые для экспорта поля "Товары@Mail.ru" (поля с префиксом "ТМ").

    .. fancybox:: img/mail_001.png
        :alt: Экспорт в Товары@mail.ru

Массовое редактирование товаров
-------------------------------

1.  Пройдите на страницу "Товары"

    .. note::

        Меню → Товары → Товары.

2.  Выберите товары которые необходимо отредактировать и нажмите

    .. note::

        Шестерёнка → Редактировать выбранные.

    .. fancybox:: img/mail_002.png
        :alt: Экспорт в Товары@mail.ru

3.  В появившемся всплывающем окне выберите поля "Товары@Mail.ru", они отмечены префиксом "ТМ".

    .. fancybox:: img/mail_003.png
        :alt: Экспорт в Товары@mail.ru

4.  Заполните поля необходимые для экспорта.


Экспорт и импорт товаров в CSV
------------------------------

1.  Продите на страницу "Экспорт данных" - вкладка "Товары"

    .. note::

        Панель администратора → Верхнее меню → Администрирование → Экспорт данных → Товары.

2.  Выберите вкладку товары.

3.  Выберите экспортируемые поля.

    .. note::

        Поля Товары@mail.ru начинаются с префикса "ТМ".

4.  Выполните экспорт нажав на кнопку "Экспорт".

    .. fancybox:: img/mail_004.PNG
        :alt: Экспорт в Товары@mail.ru

5.  Откройте экспортированный файл с помощью офисного редактора (OpenOffice, Libre, Microsoft Excel).

6.  Отредактируйте необходимые позиции.

7.  Сохраните изменения в формате CSV.

    .. fancybox:: img/mail_005.PNG
        :alt: Экспорт в Товары@mail.ru

8.  Пройдите на страницу "Импорт данных" - вкладка "Товары"

    .. note::

        Панель администратора → Верхнее меню → Администрирование → Импорт данных → Товары

9.  Выберите измененный файл CSV и нажмите на кнопку "Импорт".

    .. fancybox:: img/mail_006.PNG
        :alt: Экспорт в Товары@mail.ru


Экспорт товаров в xml файл
--------------------------

1.  После заполнения всех необходимых полей для экспорта, откройте список товаров.

    .. note::

        Меню Товары → Товары.

2.  В окне "Товары" отметьте товары которые необходимо экспортировать и нажмите

    .. note::

        Шестерёнка → Экспортировать выбранные.

    .. fancybox:: img/mail_007.PNG
        :alt: Экспорт в Товары@mail.ru

3.  Для экспорта всех товаров пройдите

    .. note::

        Панель администратора → Верхнее меню → Администрирование → Экспорт данных → Товары@Mail.ru.

    .. fancybox:: img/mail_008.PNG
        :alt: Экспорт в Товары@mail.ru

4.  Во вкладке "Товары@Mail.ru" нажмите на кнопку "Экспорт". После экспорта, xml файл сохранится в папке /var/files/.

