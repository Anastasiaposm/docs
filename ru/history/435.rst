4.3.4 → 4.3.5
-------------

    [+] — Новое

    [*] — Изменение 

    [!] — Исправлена ошибка



[+] Модули: Pickpoint: Добавлен модуль службы доставки Pickpoint

[+] Модули: Яндекс.Доставка: Добавлен модуль службы Яндекс.Доставка

[+] Модули: YML экспорт: Добавлен модуль выгрузки продуктов в YML формат

[+] Модули: ПЭК: Добавлен модуль службы доставки ПЭК

[+] API: Добавлена сущность "Call requests".

[+] API: Добавлена сущность "Carts".

[+] API: Добавлена сущность "Discussions".

[+] API: Добавлена сущность "Pages".

[+] Категории: Добавлена категория-корзина.

[+] Модули: Добавлено отображение дополнительной информации о модулях, а также фильтры для модулей.

[+] Модули: Платежи через PayPal: Добавлена конвертация валют.

[+] Модули: Платежи через PayPal: Добавлен функционал PayPal In-Context Checkout.

[+] Модули: Прайс-лист: Модуль переработан, устаревшие библиотеки удалены, скорость генерации прайс-листов увеличена, модуль стал удобнее.

[+] Модули: Синхронизация с eBay: Модуль переработан и значительно улучшен.

[+] Платежи: FirstData: Обновлен до Connect 2.0.

[+] Платежи: SagePay: Добавлен affiliate code.

[+] Платежи: Добавлен процессор Rocketgate-Native.

[+] Способы доставки: DHL: Устаревший API Airborne заменен на последнюю версию API XML-PI.

[+] Товары: Добалено отображение полного пути к товару на странице редактирования товара.

[+] Товары: Категория-корзина: Добавлено сообщение о перемещении товаров в категорию-корзину.

[+] Хуки: Добавлен хук для процесса авторизации.

[+] Хуки: Добавлены хуки в функции валют.

[+] Хуки: Заказы: Добавлены хуки и документация.

[+] Хуки: Новые хуки добавлены в функцию "fn_get_cart_products()".

[+] Хуки: Функционал Незавершенных покупок перенесен из контроллера. Добавлен хук "pre_get_carts".



[*] Модули: Русские способы оплаты: Робокасса: Добавлена оплата комиссии владельцем магазина, когда договор оформлен на физ.лицо

[*] Модули: Яндекс.Метрика: Добавлена e-commerce аналитика

[*] Модули: Сбербанк Онлайн: Добавлена конвертация валют при оплате

[*] Лицензионное соглашение: Обновлено лицензионное соглашение для CS-Cart.

[*] Модули: Вход через соцсети: Улучшен процесс привязки/отвязки учетной записи в социальной сети.

[*] Модули: Прайс-листы: Параметр "?t=" удален из URL изображений, не использующих CDN.

[*] Платежи: eWAY: Процессоры eWAY Direct Payment и eWAY Shared Payment отмечены как устаревшие.

[*] Платежи: Некоторые процессоры переименованы и удалены. Удаленные процессоры: ePassporte, MCPE, PRI [HTTPS Post], PRI [Form].



[!] Модули: Unisender: Поправлен шаблон подписки на странице оформления заказа

[!] Модули: Города: Исправлена ошибка с расположением города Севастополя

[!] Модули: 1C: Добавлена группа пользователя для новых товаров

[!] Модули: СПСР: Добавлен учет скидки заказа для товаров

[!] Модули: СПСР: Добавлена возможность изменения настроек доставки в заказе

[!] Модули: 1C: Добавлено удаление товаров со статусом "Удален"

[!] Модули: 1C: Добавлено создание неразрешенных комбинаций у которых количество 0

[!] Модули: Store Locator: Добавила добавление метки на карту при поиске

[!] Модули: Русские способы оплаты: Яндекс.Деньги: Автогенерация пароля md5 была исправлена

[!] Модули: Яндекс.Метрика: Поправлена цель для заказа обатного звонка

[!] Модули: Русские способы оплаты: Paymaster: После оплаты покупатель возвращался на оформление заказа с сообщением, что палата была отменена. Исправлено

[!] Модули: Самовывоз: Добавлен шаблон страницы списка точек самовывозов для Basic темы

[!] Модули: 1C: Добавлено описание для используемого url при обмене

[!] Модули: 1C: Добавила проверку наличия категорий в файле загружаемом из 1С

[!] API: Характеристики: Невозможно было получит изображения вариантов. Исправлено.

[!] JavaScript: Загрузчик файлов: Не скачивались файлы с пробелами и специальными символами в названиях. Исправлено.

[!] JavaScript: Не был подключен Modernizr. Исправлено.

[!] JavaScript: Отключен autofocus на мобильных устройствах.

[!] WISYWIG: Redactor: Списки работали неправильно, если Redactor находился внутри таблицы. Исправлено.

[!] База данных: Ошибка при выполнении запроса к базе данных, если в префиксе таблицы были цифры. Исправлено.

[!] Дизайн: RTL: Добавлена поддержка RTL-языков для счетов и упаковочных листов.

[!] Дизайн: Блоки: Валюты: Google индексировал ссылки с валютой. Исправлено.

[!] Дизайн: Витрина: Компактный список: Все товары находились в одной форме. Исправлено.

[!] Дизайн: Если в секции был только один активный блок, появлялись незакрытые теги. Исправлено.

[!] Дизайн: Кнопка "В корзину" пропадала после касания по экрану. Исправлено.

[!] Дизайн: Макеты: Улучшены стили вкладок.

[!] Дизайн: Меню: Подпункты последнего пункта меню отображались в один столбец. Исправлено.

[!] Дизайн: Меню: Стрелки прокрутки отображались над меню. Исправлено.

[!] Дизайн: Опции: Если у товара было много опций, они некорректно отображались на больших мониторах. Исправлено.

[!] Заказы: Невозможно было удалить из заказа промокод со специальными символами. Исправлено.

[!] Заказы: Промо-акции и скидки: Промоакции не применялись к повторному заказу, если заказ подпадал под промоакцию. Исправлено.

[!] Категории: Витрина: Функция "fn_load_products_extra_data" возвращала все категории товаров без фитрации по компании. Исправлено.

[!] Магазины: Регионы: Перенаправление пользователей на витрины в соответствии с регионом работало некрректно. Исправлено.

[!] Менеджер блоков: Блоки перетаскивались во время AJAX-запроса. Исправлено.

[!] Менеджер блоков: Блоки со специальными HTML-символами в названиях вызывали ошибки в менеджере блоков. Исправлено.

[!] Менеджер блоков: При создании нового диалога генерировались дублированные ID. Исправлено.

[!] Менеджер блоков: Растянутые в длину секции некорректно отображались в панели администратора. Исправлено.

[!] Модули: Searchanise: Тип сортировки по соответствию не был выбран по умолчанию. Исправлено.

[!] Модули: Блог: Блоки с шаблонами "Последние посты" и "Прокрутка последних постов" были пустыми в на страницах с типом "Страница" (О нас, О компании и т. д.). Исправлено.

[!] Модули: Блог: Работа блока "Последние посты" была запутаной и неочевидной. Исправлено.

[!] Модули: Блог: Тег "<!--CUT-->" удалялся из записей блога. Исправлено.

[!] Модули: Бонусные баллы: Бонусные баллы заказа не отображались в чеках в панели администратора. Исправлено.

[!] Модули: Вход через соцсети: Контент с длинным описание вызывал ошибки при публикации на Pinterest. Исправлено.

[!] Модули: Вход через соцсети: Свойство PayPal sandbox работало некорректно. Исправлено.

[!] Модули: Комбинации товаров: PayPal: Неправильные цены при оплате комбинации товаров через PayPal. Исправлено.

[!] Модули: Конструктор форм: После отправки сообщения через форму, неправильно отображался подвал. Исправлено.

[!] Модули: Конструктор форм: Хук "pages:page_content" не вызывался в случае успешной отправки формы.

[!] Модули: Обратный звонок: Значение маски ввода номера телефона проверялось неверно. Исправлено.

[!] Модули: Обратный звонок: Можно было отправить недействительный номер телефона. Исправлено.

[!] Модули: Обратный звонок: Настройка выбора количества отображаемых объектов не работала в списке обратных звонков. Исправлено.

[!] Модули: Платежи через PayPal: Payflow использовал неверную языковую переменную. Исправлено.

[!] Модули: Платежи через PayPal: Адрес пользователя менялся после ответа с PayPal. Исправлено.

[!] Модули: Платежи через PayPal: Гонконгский доллар (HKD) отсутствовал в процессоре PayPal Pro. Исправлено.

[!] Модули: Платежи через PayPal: Добавлено описание для карты Соответствия статусов заказов между PayPal и магазином.

[!] Модули: Поддержка HiDPI: Некорректно создавались изображения для файлов с одинаковыми именами. Исправлено.

[!] Модули: Поставщики: Информация о поставщике отсутствовала на странице Отгрузки. Исправлено.

[!] Незавершенные покупки: Корзина предыдущего покупателя очищалась при оформлении заказа. Исправлено.

[!] Отчеты о продажах: В некоторых случаях страны без штатов не попадали в отчеты. Исправлено.

[!] Оформление заказа: Если в процессе оформления заказа товар заканчивался, отображалось PHP-сообщение. Исправлено.

[!] Оформление заказа: Тема Basic: Кнопку "Следующий шаг" можно было нажать, когда это было запрещено. Исправлено.

[!] Панель администратора: Дизайн: Улучшены стили пикера категорий.

[!] Панель администратора: Паджинация: Общее количество отображаемых на странице объектов сбрасывалось до количества по умолчанию, если админинстратор добавлял или удалял объект. Исправлено.

[!] Поиск: Расширенный поиск: Параметр поиска "Предыдущая неделя" работал некорректно. Исправлено.

[!] Профиль: В пустое необязательное поле профиля с типом "Дата" автоматически ставилась текущая дата. Исправлено.

[!] Резервное копирование и восстановление: Новый механизм создания резервных копий в ZIP-архивах; используется при создании резервных копий, содержащих только базу данных, или только файлы.

[!] Резервное копирование и восстановление: Ошибка с переполнением памяти при сжатии резервной копии в архив ".tgz". Исправлено.

[!] Способы оплаты: Atos: Во время оплаты возникала ошибка PHP. Исправлено

[!] Способы оплаты: Atos: Неправильно передавались параметры в скрипт. Исправлено.

[!] Способы оплаты: eWAY: Невозможно было разместить заказ через Internet Explorer из-за ограничений по длине CVV. Исправлено.

[!] Способы оплаты: Невозможно было попасть на страницу оплаты при отключенном JavaScript. Исправлено.

[!] Стили: Стиль Brightness улучшен.

[!] Страницы с товарами: Возникала критическая ошибка с Punycode. Исправлено.

[!] Темы: Исправлена совместимость со старыми темами.

[!] Товары: Категории: Если товары был добавлен с одной витрины на другую, то при их удалении из первой витрины они не удалялись со второй витрины. Теперь эти товары переносятся в категорию-корзину.

[!] Товары: Можно было добавить товары в корзину без выбора обязательных опций. Исправлено.

[!] Товары: Неправильно вычислялась позиция товара. Исправлено.

[!] Товары: Опции: Неправильно выбирался вариант опции по умолчанию для товаров на странице результатов поиска. Исправлено.

[!] Товары: Опции: Поиск: Неправильно выбирался вариант опции по умолчанию для товаров. Исправлено.

[!] Товары: Опции: Функция JavaScript для выбора опции использовала неправильное значение для опций с типом "Флажок", если флажок не был установлен. Исправлено.

[!] Товары: Поиск: В результатах поиска не выводились некоторые товары, если была включена настройка "Включить отслеживание количества товаров на складе" и отключена настройка "Показывать товары, которых нет в наличии". Исправлено.

[!] Товары: Характеристики: Для характеристики с типом "Дата" нельзя было задать дату раньше, чем год начала работы магазина. Исправлено.

[!] Товары: Характеристики: При генерации ссылки на фильтр по характеристике не проверялся статус фильтра. Исправлено.

[!] Товары: Характеристики: При открытии страницы с вариантами характеристик не было проверки, доступна ли характеристика для этой компании. Исправлено.

[!] Управление заказами: Не отображалась отметка о счете/кредитовом извещении. Исправлено.

[!] Управление заказами: Промо-акции и скидки: Не сохранялись опции для товара, который был задан как бесплатный товар в промо-акции с настройкой "Любые комбинации опций". Исправлено.

[!] Управление заказами: Страница заказа: Неправильно отображалась стоимость товара, если изменялись значения модификаторов. Исправлено.

[!] Файлы: Обновлен elFinder.

[!] Фильтры: Невозможно было указать дробное число в фильтре. Исправлено.

[!] Фильтры: При создании нового фильтра в список "Фильтровать по" попадали группы характеристик. Исправлено.

[!] Фильтры: Товары: Неправильно кэшировался выбранный макет и сортировка при выборе варианта фильтра. Исправлено.

[!] Центр обновлений: Скрипт восстановления не генерировался на серверах с Windows, потому что что название файла содержало точку с запятой. Исправлено.

[!] Экспорт/Импорт: Комбинации товаров: Значения неправильно отделялись друг от друга, если в значениях использовались разделители. Исправлено.

[!] Экспорт/Импорт: Товары: Опции: Неправильно обновлялись глобальные опции. Исправлено.

[!] Экспорт/Импорт: Товары: Характеристики: Характеристики товара не экспортировались вместе с товаром, если эти характеристики находились в скрытой группе. Исправлено.

[!] Экспорт/Импорт: Характеристики: Характеристике не присваивалась корневая директория при импорте. Исправлено.

[!] Электронная почта: Невозможно было отправить письмо на электронный адрес с кириллицей. Исправлено.

[!] Ядро: Сесссия: Сброс пароля: Функция "fn_generate_key" использовала старый алгоритм для генерации случайной строки. Исправлено.

[!] Ядро: Скрипты: Баг со Smarty-тэгом "{scripts}". Исправлен.

[!] Ядро: Улучшено определение протокола HTTPS.

[!] Ядро: Файлы: Невозможно было загрузить файлы, если параметру "post_max_size" в php.ini было присвоено значние "0". Исправлено.

[!] Языки: Переводы: Неправильно экспортировались переводы модулей. Исправлено.

[!] {#5750} Модули: Бонусные баллы: Бонусные баллы не отображались в чеке, который приходил на почту, после обновления статуса заказа. Исправлено.

[!] {#5780} Модули: Поставщики: Способы доставки были недоступны при оформлении заказа, если для поставщика было отключено свойство способов доставки "Ни одного", а также, если настройка "Отображать способы доставки отдельно для каждого поставщика" была отключена. Исправлено.

[!] {#5812} Модули: SEO: Улучшена проверка уникальности объекта.

[!] {#5847} Модули: Подарочные сертификаты: Надпись Warning была жестко запрограммирована, а не использовала языковую переменную. Исправлено.

[!] {#5849} Модули: Подарочные сертификаты: Переадресация страницы не выполнялась, когда покупатель отменял сертификат, примененный к стоимости корзины или общей сумме заказа. Исправлено.

[!] {#5910} Центр обновлений: Не создавалась резервная копия директории "var/langs" во время обновления. Исправлено.

[!] {#5921} Товары: Заказы: Товар, который было запрещено покупать, можно было заказать с помощью функции повторного заказа.

[!] {#5924} Дизайн: Оформление заказа: Стрелка для применения купона заменена на ссылку "Применить".

[!] {#5931} Способы доставки: Нельзя было задать способ доставки, если заказ состоял только из товаров с бесплатной доставкой. Исправлено.

[!] {#5959} Способы оплаты: Доп. сбор: Налоги рассчитывались без доп. сбора после оформления заказа. Исправлено.

[!] {#5970} API: Невозможно было задать пустое значение для настройки. Исправлено.

[!] {#5981} Ядро: Изображения: Расширения изображений, указанные в верхнем регистре, неправильно обрабатывались при проверке на допустимые типы файлов. Исправлено.

[!] {#5999} Блоки: Профиль: После входа пользователя в учетную запись, использовался некорретный "return_url". Исправлено.

[!] {#6002} Промо-акции: Купоны: Заказы: Купон генерировался для каждого подзаказа. Исправлено.

[!] {#6010} Дизайн: JavaScript: Класс "ty-table-disable-convertation" не учитывал тег "th". Исправлено.

[!] {#6014} Дизайн: Макеты: Фиксированная ширина работала некорректно. Исправлено.

[!] {#6019} Модули: Прикрепленные файлы:  Проверка прав выполнялась только для товаров. Исправлено.

[!] {#6021} Валюта: Опции: Исправлены стили опций товаров.

[!] {#6028} Центр обновлений: Поле "conflicts" в "installed_upgrades" было слишком маленькое, что вызывало ошибки сериализации. Исправлено.

[!] {#6035} Центр обновлений: Вызов функции "set_time_limit" мог вызывать PHP-сообщение, которое не позволяло сгенерировать скрипт восстановления. Исправлено.

[!] {#6036} Дизайн: RTL: Улучшена поддержка RTL-языков в панели администратора.

[!] {#6041} Товары: Кнопка "Сохранить" не работала в списке товаров в Internet Explorer.

[!] {#6044} Оформление заказа: Кнопка "Пересчитать стоимость доставки" отображается на странице оформления заказа только при редактировании данных пользователя.

[!] {#6051} Отчеты о продажах: Появлялась SQL-ошибка, если отчет ограничивался некоторыми заказами.

[!] {#6056} Дизайн: Подсказки: Неправильное положение подсказки на странице. Исправлено.

[!] {#6078} Модули: Обратный звонок: Паджинация работала некорректно. Исправлено.

[!] {#6087} Модули: Вход через соцсети: Запрашивались не все поля профиля при входе через Facebook. Исправлено.

[!] {#6091} Способы оплаты: Servired: У запроса об оплате была устаревшая структура и подпись. Исправлено.

[!] {#6112} Дизайн: Модули: Обратный звонок: Вторая часть номера телефона не отображалась на устройствах с iOS. Исправлено.

