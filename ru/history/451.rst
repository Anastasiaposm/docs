*************
4.4.3 → 4.5.1
*************

    [+] — Новое

    [*] — Изменение

    [!] — Исправлена ошибка


[+] Модули: Комбинации товаров: Теперь можно выбрать, должна ли комбинация быть доступна только на определенный период времени или всегда.

[+] Модули: Платежи через PayPal: Теперь администраторы могут сделать так, чтобы новые заказы со способом оплаты PayPal Standard автоматически получали статус “Открыт” или “Не завершен”.

[+] Промо-акции: Редактирование заказов: Теперь в файле config.local.php можно отключить автоматическое переприменение промо-акций при редактировании заказа согласно правилам, существующим на момент редактирования.

[+] Витрины: Макеты: При клонировании витрины, настройки контента блоков теперь обновляются автоматически, чтобы использовать сущности витрины-клона.

[+] Пользователи: Теперь при отключении учетных записей можно отправлять пользователям уведомления по электронной почте.

[+] Лицензирование: Редакция Ultimate: CS-Cart Русская версия теперь доступна в редакции Ultimate, которая позволяет использовать неограниченное число витрин. Чтобы использовать эту редакцию, необходима лицензия CS-Cart Ultimate.


[*] Модули: “С этим товаром часто покупают…”: Теперь товары в блоке с заполнением “Также куплены” сортируются от наибольшего количества покупок к наименьшему.

[*] Модули: Конструктор прайс-листов: Теперь в Google Merchant Center можно экспортировать комбинации опций с GTIN (используется поле комбинации КОД) и изображения. Если у товара не задана характеристика GTIN, то GTIN теперь может быть взят из поля товара КОД.

[*] Модули: Конструктор прайс-листов: На странице со списком прайс-листов теперь есть подсказки, связанные с экспортом в Google Merchant Center.

[*] Модули: Google reCAPTCHA: Анти-бот (CAPTCHA): Старый механизм защиты от ботов был вырезан из ядра. Все актуальные настройки, связанные с CAPTCHA, теперь находятся в модуле Google reCAPTCHA. Обратная совместимость сохранена.

[*] Модули: СДЭК: Улучшен интерфейс управления отгрузками.

[*] Модули: Яндекс.Доставка: В редактор документов добавлена переменная ‘pickup_data’ с информацией о выбранном пункте доставки.

[*] Модули: Яндекс.Доставка: Добавлена настройка, которая позволяет включить или выключить запись запросов в журнал. По умолчанию запись запросов выключена. 

[*] Модули: Яндекс.Доставка: Информация о выбранной точке самовывоза теперь отображается на боковой панели рядом с информацией о способе доставки.

[*] Модули: Яндекс.Доставка: Теперь на Яндекс.Доставке не создаются автоматически заказы-черновики. Вместо этого, после создания отгрузки в магазине можно воспользоваться кнопкой “Создать заказ”, чтобы создать подтвержденный заказ на Яндекс.Доставке.

[*] Модули: Яндекс.Доставка: Теперь отгрузки Яндекс.Доставки находятся в отдельной вкладке на странице с отгрузками.

[*] Модули: YML экспорт: Изменены требования к водяным знакам.

[*] Модули: YML экспорт: В настройки товара добавлены атрибуты ‘fee’ и ‘downloadable’.

[*] Ядро: Registry: Теперь обработчики обновления кэша (cache_update_handlers) хранятся отдельно друг от друга, и с ними можно работать выборочно. Это снижает нагрузку на сервер и позволяет избежать состояния гонки.

[*] Маркетинг: Незавершенные покупки: Теперь если незарегистрированный покупатель вводит во время оформления заказа какие-то данные, то эти данные сохранятся, даже если покупатель не оформит заказ.

[*] Способы доставки: UPS: Обновление: UPS больше не поддерживает тип доставки “Примерные розничные расценки”. Поэтому при обновлении во всех способах доставки, использующих UPS, тип доставки “Примерные розничные расценки” будет заменен на “Однократную доставку”.

[*] Хранилище данных: Система доставки контента (CDN): Библиотека Amazon SDK обновлена до версии 1.6.3.


[!] Модули: Конструктор прайс-листов: Товары: Характеристики: Если в магазине было несколько характеристик с одинаковым названием, то значения всегда брались из последней характеристики. Исправлено.

[!] Модули: Платежи через PayPal: Для некоторых платежей, сделанных через PayPal Pro, не обрабатывались IPN-сообщения. В результате, статусы некоторых заказов не менялись автоматически. Исправлено.

[!] Модули: RSS-лента: В ленту попадали выключенные или спрятанные посты из блога. Исправлено.

[!] Модули: SEO: При клонировании витрины могли неправильно сгенерироваться SEO-имена категорий на витрине-клоне. Исправлено.

[!] Модули: CommerceML: Если у товара, импортируемого из 1C, в файле выгрузки не было категории, то “Общая категория для выгружаемых товаров” присваивалась товару всегда, даже если настройка “Загружать категории из 1С” была выключена. Исправлено.

[!] Модули: YML экспорт: Длина текста в поле ‘yml2_description’ была ограничена (175 символов). Из-за этого описания товаров в прайс-листе могли обрезаться. Исправлено.

[!] Модули: YML экспорт: Если товару назначить несколько категорий, а затем удалить основную категорию, то товар экспортировался без категории. Исправлено.

[!] Модули: YML экспорт: Не выгружалось поле ‘sales_notes’ для типа описания “Книга”. Исправлено.

[!] Модули: Определение местоположения: Если использовалась версия PHP 5.3 и был выбран город, то способы доставки не отображались на странице товара. Исправлено.

[!] Модули: Яндекс.Маркет: Когда от Яндекс.Маркета приходил запрос на обновление заказа с ID, который уже не существует, возникала SQL-ошибка. Исправлено.

[!] Модули: Яндекс.Маркет: Неправильно работало изменение статуса при отмене заказа: модуль не учитывал все возможные причины отмены. Исправлено.

[!] Блоки: Меню: На витрине могло отображаться меню, принадлежащее другой витрине. Исправлено.

[!] Оформление заказа: Способы оплаты: Невозможно было разместить заказ, если у него была нулевая стоимость. Исправлено.

[!] Оформление заказа: Регистрация: Когда была включена настройка “Администратор должен активировать новые учетные записи пользователей”, покупатели все равно могли выбрать регистрацию при оформлении заказа. Исправлено.

[!] Дизайн: Тема Bright: Модули: Email-маркетинг: У блока “Подписаться” отсутствовал заголовок. Исправлено.

[!] Дизайн: Родительские темы: Перейти к витрине в режиме дизайн: Если шаблон, редактируемый на витрине, отсутствовал в дочерней теме, то изменения сохранялись в родительской теме. Исправлено.

[!] Дизайн: Витрина: Темя Bright: Кнопки: Если использовать некоторые языки, то размер или положение кнопок относительно друг друга на экранах мобильных устройств могли быть неправильными. Исправлено.

[!] Дизайн: Витрина: Использование длинных слов в тексте могло привести к тому, что текст не умещался в зону, отведенную для него. Исправлено.

[!] Документы и шаблоны email-уведомлений: На списке email-уведомлений и сниппетов присутствовали ненужные переключатели языка редактирования. Исправлено.

[!] Документы: Редактирование документов было доступно при выбранной витрине, хотя должно было быть доступно только в режиме “Все магазины”. Исправлено.

[!] Лицензирование: Режим лицензирования: Если использовать лицензионный ключ с версией, которая была выпущена после того, как закончилась подписка на обновления, то отображалось неправильное сообщение. Исправлено.

[!] Уведомление о заказе: Старый режим редактирования email-уведомлений: В email-уведомлениях о статусе заказа, отправляемых в отдел оформления и обработки заказов, использовались тема письма и шаблон от первой витрины, а не от той витрины, на которой был размещен заказ. Исправлено.

[!] Товары: Характеристики: Если вручную добавлять вариант характеристики на странице редактирования товара, то отсутствовала проверка, существует ли уже такой вариант. Исправлено.

[!] Настройки: Общие: Для настройки "Начальный номер заказа" можно было ввести неподходящие значения, в том числе нечисловые. Исправлено.

[!] Способы доставки: Temando, Почта России: Хотя для работы требовалось расширение php-soap, не выводилось уведомление, если расширение не было установлено. Исправлено.

[!] {#6562} Дизайн: Письмо справа налево не поддерживалось в хлебных крошках и в теге <title>. Исправлено.

[!] {#6568} Способы доставки: UPS: При выборе службы доставки “UPS All countries: Worldwide Express Freight” не удавалось получить стоимость доставки. Исправлено.

[!] {#6574} Способы доставки: Почта России: Не рассчитывалась стоимость доставки для “Посылки Стандарт”. Исправлено.

[!] {#6609} JS: Характеристики: CKEditor: При использовании CKEditor не работало переключение между страницами на списке вариантов характеристик во всплывающем окне. Исправлено.

[!] {#6610} Модули: Обратный звонок: Кнопка “Купить в один клик” отображалась для незарегистрированных покупателей, даже если цены и кнопка “Добавить в корзину” были скрыты от них. Исправлено.

[!] {#6628} Дизайн: Родительские темы: Файлы LESS: В некоторых случаях файлы LESS из дочерней темы не переопределяли файлы LESS из родительской темы. Исправлено.

[!] {#6635} Документы: Счет: Скидка: Если скидка на товар была задана через промо-акцию для каталога, то размер скидки в присылаемом счете был равет 0. Исправлено.

[!] {#6655} Товары: Поиск: Когда была выбрана конкретная витрина, поиск по товарам мог не работать. Исправлено.

[!] {#6667} Ядро: Консоль: HTTPS: Если магазин работал по HTTPS, то в консольном режиме не выполнялись PHP-контоллеры для витрины. Исправлено.

=========
4.5.1.SP1
=========

[!] Кэш: Макеты: Если у блока был разный контент в зависимости от объекта (товара, категории и т.п.), то во всех экземплярах блока мог отображаться контент только одного из объектов. Исправлено.
