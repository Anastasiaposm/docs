******
4.10.2
******

==================================
Новая функциональность и улучшения
==================================

[+] Дизайн: Блоки: Социальные ссылки: Была добавлена иконка YouTube.

[+] Модули: Вариации товаров: Редактирование выбранных товаров: На страницу массового редактирования добавлено отображение изображений, а также имени вариации и характеристик.

[+] Модули: Вариации товаров: Улучшена производительность при работе с вариациями на странице категории на витрине.

[+] Оформление заказа: Возвращена возможность указывать дополнительный адрес (для отправки счёта). Так как второй адрес обычно не нужен, то по умолчанию эта возможность используется для указания дополнительных реквизитов (например, для юридических лиц).

[+] Оформление заказа: Добавлена возможность менять порядок полей в блоке "Доставка в" и добавлять туда дополнительные поля.

[+] Оформление заказа: Добавлено разбиение полного имени на имя и фамилию в зависимости от расположения соответствующих полей профиля в блоке "Информация о покупателе".

[+] Редактирование заказа: Товары: На странице редактирования заказа теперь видно изображение товара и его артикул.

[+] WYSIWYG: Добавлена возможность вставлять блоки в текст страниц и описания товаров.

=========================================
Изменения в существующей функциональности
=========================================

[*] Вход через соцсети: Обновлена версия библиотеки для поддержки LinkedIn Api v2.

[*] Модули: Вариации товаров: Варианты характеристик в интерфейсе переключения товаров при равной позиции теперь сортируются по названию.

[*] Модули: Вариации товаров: Варианты характеристик в интерфейсе создания вариаций при равной позиции теперь сортируются по названию.

[*] Модули: Вариации товаров: Теперь главная доступна и по обычной ссылке, и по ссылке с параметром "variation_id".

[*] Модули: Вариации товаров: Теперь при переключении между вариациями не будут сбрасываться уже ранее выбранные характеристики.

[*] Модули: Поиск от Searchanise: Теперь поиск работает даже во время полного ре-импорта данных.

[*] Способы оплаты: QB Merchant Service: Способ оплаты был обновлен: добавлена поддержка OAuth 2.0.

[*] Способы оплаты: Realex переименован в Global Payments; добавлена поддержка 3D Secure 2 для соответствия PSD2.

[*] Способы оплаты: eWay: Теперь номер карты и CVV2 вообще ни на каком этапе не попадают в базу данных магазина.

[*] Товары: Редактировать выбранные: Теперь на странице массового редактирования отображаются иконки товаров.

[*] Ядро: CDN: Библиотека Amazon SDK была обновлена до версии 3.99.

[*] Ядро: Журнал событий: Увеличено максимально возможное количество записей в журнале.

==================
Исправления ошибок
==================

[!] Витрины: Не срабатывал редирект с WWW на витрину. Исправлено.

[!] Группы пользователей: Привилегии: Администратор без прав на создание заказа мог создать заказ путем копирования. Исправлено.

[!] Дизайн: В некоторых шаблонах встречались опечатки. Исправлено.

[!] Дизайн: Детальная страница товара: Превью: Не работала настройка ширины превью изображения товара. Исправлено.

[!] Дизайн: Панель администратора: Массовое редактирование товаров: Одна из галочек, отвечающих за массовое назначение категорий товарам, отображалась неправильно. Исправлено.

[!] Дизайн: Товары: Редактировать выбранные: Отображалось пустое пространство на странице обновления товаров. Исправлено.

[!] Дизайн: Хуки: В именах двух TPL-хуков были опечатки. Исправлено.

[!] Заказы: Когда покупатель пытался заново оплатить заказ, возникала ошибка PHP Error. Исправлено.

[!] Модули: Boxberry: Расчет доставки не работал для новых токенов API. Исправлено.

[!] Модули: CommerceML: В некоторых случаях товарные предложения загружались в CS-Cart как комбинации опций, а не как вариации, даже если была настроена выгрузка вариаций. Исправлено.

[!] Модули: CommerceML: Вариация с нулевым количеством могла стать вариацией по умолчанию, несмотря на настройки. Исправлено.

[!] Модули: CommerceML: При обмене заказами мог обновиться не тот заказ. Исправлено.

[!] Модули: CommerceML: Разные характеристики на стороне системы обмена выгружались в CS-Cart как одна характеристика, которая включала все значения. Исправлено.

[!] Модули: CommerceML: Скидка на товар не округлялась. Исправлено.

[!] Модули: CommerceML: Цель характеристики изменялась при повторном импорте товаров. Исправлено.

[!] Модули: QuickBooks: Невозможно было импортировать IIF-файл из CS-Cart в QuickBooks 2019. Исправлено.

[!] Модули: SEO: Невозможно было изменить SEO-имя у ссылки. Исправлено.

[!] Модули: Unisender: Если не был введён API-ключ, то на странице оформления заказа всё равно отображалась галка подписки на рассылку. Исправлено.

[!] Модули: Блог: Смена ветки блога была невозможна. Исправлено.

[!] Модули: Бонусные баллы: Отображаемая стоимость на странице оформления заказа не менялась после применения бонусных баллов. Исправлено.

[!] Модули: Вариации товаров: Правка характеристики товара могла привести к поломке вариаций, построенных на этой характеристике, если вариации товаров не входили в категории характеристики. Исправлено.

[!] Модули: Видео-помощь: Панель инструментов: Обучающий видео ролик не появлялся. Исправлено.

[!] Модули: Карты и геолокация: Города: Не работало определение местоположения на Яндекс карте для города Нур-Султан (Астана).

[!] Модули: Платежи через PayPal: Возврат товаров: При возврате средств через PayPal возникала ошибка, а статус заказа не менялся автоматически. Исправлено.

[!] Модули: Платежи через PayPal: Платежный сбор не рассчитывался, если попытаться оформить на странице корзины через Express Checkout. Исправлено.

[!] Модули: Подарочные сертификаты: При размещении заказа с ранее использовавшимся подарочным сертификатом могли возникнуть ошибки PHP Warning. Исправлено.

[!] Модули: Поставщики: Общий доступ: Поставщику, принадлежащему нескольким витринам, можно было настроить даже те способы доставки, которые не относятся к его витринам. Исправлено.

[!] Модули: Поставщики: Общий доступ: У поставщика, общего для нескольких витрин, могли пропасть некоторые способы доставки при редактировании в режиме конкретной витрины. Исправлено.

[!] Модули: Прайс-листы: Прайс-лист для Google Base: Промо-акции и скидки: Цена товара с нулевым остатком на складе неправильно добавлялась в прайс-лист. Исправлено.

[!] Модули: Рассылки: В консоль браузера записывались ошибки, когда два или более списка рассылки отображались на странице редактирования профиля. Исправлено.

[!] Оформление заказа: Заказ от имени гостя нельзя было разместить если ReCaptcha показывается только на форме авторизации. Исправлено.

[!] Оформление заказа: Не отображалась кнопка быстрой очистки поля города. Исправлено.

[!] Оформление заказа: Новая стоимость доставки не отображалась при смене покупателем тарифной зоны. Исправлено.

[!] Оформление заказа: Телефон: Некоторые форматы номеров телефонов из разных стран не поддерживались. Исправлено.

[!] Панель администратора: Select2: Отсутствовала языковая переменная для сообщения "Не найдено". Исправлено.

[!] Панель администратора: Меню: Если нажать на корневой пункт меню, открывались все вложенные под-меню. Исправлено.

[!] Способы оплаты: eWay: Платеж не проходил. Исправлено.

[!] Товары: Массовое редактирование: Основная категория товара терялась, если она была изменена во время массового редактирования. Исправлено.

[!] Товары: Характеристики: Скопированные характеристики не отображались у товаров на новой витрине. Исправлено.

[!] Файлы: Редактор файлов не работал с пользовательскими языками. Исправлено.

[!] Экспорт/Импорт: Характеристики: При импорте характеристики в неё могли попасть категории из другой витрины. Исправлено.

[!] Ядро: Галереи изображений: OwlCarousel: Отсутствовали стрелки навигации в галерее изображений на странице товара на витрине. Исправлено.

[!] Ядро: Модули: Схема 4.0: Возникала ошибка при попытки удалить выключенный модуль, реализованный в 4ой схеме. Исправлено.

[!] Multi-Vendor: Модули: CommerceML: Категория по умолчанию была недоступна для редактирования при некоторых условиях. Исправлено.

[!] Multi-Vendor: Модули: PayPal Adaptive Payments: CRON-ссылка в настройках модуля была неправильной. Исправлено.

[!] Multi-Vendor: Модули: Премодерация данных продавцов: Вариации товаров: При открытии товара, находящегося на модерации, возникали ошибки PHP Notice. Исправлено.

[!] WYSIWYG: Визуальные редакторы не переключались в режим RTL когда был выбран язык с письмом справа налево. Исправлено.
