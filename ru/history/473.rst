*****
4.7.3
*****

==================================
Новая функциональность и улучшения
==================================

[+] Модули: Адаптивная панель администратора [Beta]: Теперь актуальная версия модуля доступна в дистрибутиве, но не установлена по умолчанию.

[+] Модули: Расширенный импорт товаров [Beta]: Теперь актуальная версия модуля доступна в дистрибутиве, но не установлена по умолчанию.

=========================================
Изменения в существующей функциональности
=========================================

[*] Дизайн: Поиск заказов: Внешний вид поисковых фильтров на списке заказов на витрине был изменен.

[*] Модули: CommerceML: Добавлена возможность выгружать вариации в заказах.

[*] Модули: YML экспорт: Добавлена подсказка, что при исключении категории из экспорта исключаются и её подкатегории.

[*] Модули: Конструктор прайс-листов: Интерфейс выбора экспортируемых категорий и товаров был изменён, чтобы было понятно, что оба условия (категория и товар) должны выполняться, чтобы товар попал в прайс-лист.

[*] Модули: Приложение "Мобильный администратор": Теперь модуль по умолчанию недоступен на новых установках CS-Cart.

[*] Модули: Яндекс.Метрика: Изменена отправка данных о заказе в Яндекс.Метрика (перешли на новый ecommerce-код).

[*] Ядро: .htaccess: Теперь "Options -MultiViews" закомментировано в файле .htaccess.

==================
Исправления ошибок
==================

[!] Дизайн: Заказы: Когда расширенный поиск производился по товарам, в окне выбора товаров не было кнопки "Закрыть" или "Сохранить". Исправлено.

[!] Дизайн: Стили: Категории: Отступ дерева категорий в панели администратора был неправильным. Исправлено.

[!] Дизайн: Тема Bright: Макеты: Блог: В некоторых случаях ссылка "Просмотреть все" могла вести на 404 страницу. Исправлено.

[!] Дизайн: Товары: Тег <tr> не был закрыт в design/themes/responsive/templates/views/products/components/product_files.tpl. Исправлено.

[!] Дизайн: Языки с письмом справа налево: Стрелки в вертикальном списке были направлены не в ту сторону. Исправлено.

[!] Заказы: Данные банковской карты не удалялись из незавершенных заказов. Исправлено.

[!] Импорт/Экспорт: Если у импортируемых товаров были артикулы с кириллицей, то при импорте могла возникнуть ошибка. Исправлено.

[!] Карта сайта: На странице "Карта сайта" отображались разделы всех витрин. Исправлено.

[!] Компании: Редактировать контент: Языковые переменные витрины, отредактированные при наличии нескольких витрин, невозможно было изменить после удаления всех витрин, кроме той, у которой были изменены языковые переменные. Исправлено.

[!] Модули: Boxberry: На странице оформления заказа для некоторых городов не отображался способ доставки. Исправлено.

[!] Модули: CommerceML: При загрузке из файла характеристики "Вес" с несколькими вариантами возникала ошибка. Исправлено.

[!] Модули: CommerceML: При загрузки опций было невозможно было загрузить цену как общую цену товара. Исправлено; добавлена настройка "Комбинация из одной опции (общая цена)".

[!] Модули: SEO: В микроразметке товара отображалась цена, не учитывающая скидку от промоакции для каталога. Исправлено.

[!] Модули: SEO: У вариаций или товаров с комбинациями опций при включенном отслеживании с учётом опций мог отображаться неверный статус доступности в микроразметке. Исправлено.

[!] Модули: Searchanise: Не уходил запрос на удаление языка из базы, когда язык выключается или удаляется. Исправлено.

[!] Модули: eDost: Для служб доставки без страховки не отображались ПВЗ при оформлении заказа. Исправлено.

[!] Модули: Блог: Если модуль "RSS-лента" не был установлен, а модуль "Блог" был установлен, то блок модуля "RSS-лента" на странице списка блоков отображался как "_block_rss_feed". Исправлено.

[!] Модули: Бонусные баллы:  При добавлении бонусных баллов покупателю могла возникнуть ошибка типа PHP Warning. Исправлено.

[!] Модули: Вариации товаров [Beta]: Поле "Product type" не было указано как возможное поле на странице импорта товаров. Исправлено.

[!] Модули: Вариации товаров [Beta]: У кнопок "В корзину" дублировались идентификаторы. Исправлено.

[!] Модули: Возврат товара: Для пользователей с типом "Гость" отображались все возвраты, оформленные гостями. Исправлено.

[!] Модули: Вход через соцсети: Российские социальные сети: При попытке войти в магазин через "ВКонтакте" возникала ошибка. Исправлено.

[!] Модули: Конструктор прайс-листов: Когда был включен модуль “Прайс-лист для Google Base”, при переключении макета у прайс-листа с количеством элементов (товаров и категорий) более 1000 возникала ошибка. Исправлено.

[!] Модули: Поставщики: Email-уведомления: Переменная "order_status" не работала для второй витрины. Исправлено.

[!] Модули: Поставщики: При удалении товаров, привязанных к поставщикам, не удалялись ссылки на эти товары на страницах редактирования поставщиков в панели администратора. Исправлено.

[!] Модули: Почта России: При создании способа доставки (до его первого сохранения) отображались все возможные настройки способа доставки, хотя некоторые должны были быть скрыты в зависимости от типа почтового отправления. Исправлено.

[!] Модули: Рассылки: В некоторых случаях было невозможно установить модуль из-за ошибки в SQL-запросе. Исправлено.

[!] Модули: Рассылки: Подтверждение на обработку персональных данных не работало в теме Responsive. Исправлено.

[!] Модули: СДЭК: При полной оплате заказа подарочным сертификатом не создавалась отгрузка в СДЭК. Исправлено.

[!] Отгрузки: Когда использовались старые шаблоны email-уведомлений, в письме об отгрузке не отображался список товаров. Исправлено.

[!] Оформление заказа: Если отображение шага "Способ доставки" было выключено, а настройка "Покупатель должен зарегистрироваться либо войти, чтобы оформить заказ" была включена, то после регистрации нового покупателя на странице оформления заказа всё равно отображался выбор способа доставки. Исправлено.

[!] Поля профиля: Вкладка "Варианты" была недоступна для поля из секции "Адрес плательщика". Исправлено.

[!] Способы оплаты: Можно было создать способ оплаты, даже не заполнив обязательные настройки на вкладке "Настроить". Исправлено.

[!] Экспорт/Импорт: Не экспортировались переводы для описаний брендов. Исправлено.

[!] Экспорт/Импорт: Оптовые скидки и товары в заказе экспортировались для всех витрин, а не только для выбранных. Исправлено.

[!] Экспорт/Импорт: При импорте данных для нескольких языков, для товаров с несколькими языками не было привязки к категории по умолчанию, и для характеристик импортировался только один перевод. Исправлено.

[!] Экспорт/Импорт: Товары: Параметры доставки: Если товар был импортирован с полем "Количество штук в коробке" на PHP 7.1+, то в базе данных сохранялись неверные данные. Исправлено.

[!] Ядро: AJAX-запрос к отсутствующей странице приводил к критической ошибке. Исправлено.

[!] Ядро: Преобразование к целому числу на 32-битных системах вызывало ошибки, если оно превышало максимально допустимое значение (PHP_INT_MAX).

[!] {#7050} Дизайн: Документы: Переменная порядкового номера товара ( {p.counter} ) не отображалась при выводе документа. Исправлено.

[!] {#7103} Дизайн: WYSIWYG: Redactor 2 автоматически заменял тег <i> на <em>. Исправлено.

[!] {#7105} Товары: Категории: Если в магазине было много категорий, то при раскрытии категории происходило возвращение к началу списка категорий. Исправлено.

[!] {#7113} Характеристики товаров: Если у характеристики было слишком много вариантов, то не все варианты загружались в выпадающем списке в панели администратора. Исправлено.

[!] {#7150} Шаблоны: Группы пользователей: У атрибута disabled вместо " использовался &quot;. Исправлено.
