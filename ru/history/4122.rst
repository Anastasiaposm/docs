******
4.12.2
******

==================================
Новая функциональность и улучшения
==================================

[+] Дизайн: Блоки: Товары: В настройки блоков с ручным заполнением добавлена возможность быстрого добавления товара по имени.

[+] Доставка и налоги: Способы доставки: Налоги:  Контекстное меню было добавлено на страницы "Способы доставки" и "Налоги".

[+] Заказы: Отгрузки:  Тексты и языки: На страницы "Отгрузки" и "Тексты и языки" были добавлены контекстные меню.

[+] Модули: Email-маркетинг: SEO: Контекстное меню было добавлено на страницы "Подписчики", "SEO-правила", "301-редиректы".

[+] Модули: Баннеры: Прайс-листы: На страницы "Баннеры" и "Прайс-листы" было добавлено контекстное меню.

[+] Модули: Теги: Расширенный импорт товаров: Бонусные баллы: Было интегрировано контекстное меню.

[+] Модули: Центр сообщений: В настройках уведомлений обновлены названия уведомлений.

[+] Модули: Яндекс.Касса: Модуль был переименован в ЮKassa.

[+] Модули: Российские способы оплаты: Платежный процессор "Яндекс.Деньги: Перевод на счёт" переименован в "ЮMoney: Перевод на счёт".

[+] Панель администратора: На страницы товаров, заказов, отгрузок, характеристик и продавцов была добавлена возможность выбирать сохраненный поиск по умолчанию.

[+] Товары: Опции: Пользователи: Группы пользователей: На страницы "Опции" и "Группы пользователей" было добавлено контекстное меню.

[+] Экспорт/импорт: При импорте товаров с без / несуществующей категорией, будет создана категория "Товары без категории", куда попадут новые импортируемые товары.

[+] Ядро: Сессия: Добавлена синхронизация корзины между несколькими браузерами/устройствами для авторизованного пользователя.

[+] Multi-Vendor: Заказы: Детали заказа: Данные продавца теперь отображаются в зависимости от настроек полей профиля продавца.

[+] Multi-Vendor: Модули: Платежи через Stripe Connect: Добавлено логирование ошибок.

[+] Multi-Vendor: Модули: Платежи через Stripe Connect: В форму кредитной карты добавлено поле почтового индекса для уменьшения количества отказов эмитента карты.

[+] Multi-Vendor: Модули: Расширенный импорт товаров: Продавцы и администраторы могут добавлять свои файлы к пресетам, не мешая друг другу.

[+] Multi-Vendor: Поля профиля: Продавцы: Теперь пользовательские поля профиля продавцов можно вывести на детальной странице продавца на витрине.

[+] Multi-Vendor Ultimate: Модули: Конструктор прайс-листов: Теперь вы можете генерировать и экспортировать прайс листы на товары из определенной витрины.

=========================================
Изменения в существующей функциональности
=========================================

[*] Модули: Google Analytics: Добавлена поддержка Google Аналитики 4.

[*] Модули: Чат с продавцом: Теперь, если сообщение отправлено со страницы товара, заказа или пресета импорта, этот объект проще заметить и понять контекст.

[*] Модули: Экспорт в Яндекс.Маркет: Уменьшено потребление памяти и увеличена скорость генерации прайс-листа.

[*] Модули: ЮKassa: SDK был обновлен до версии 2.0.3.

[*] Панель администратора: Заказы: Метод доставки заказа теперь выбран по умолчанию в окне создания отдельной отгрузки.

[*] Экспорт/импорт: Регионы: Регионы вынесены в собственный раздел.

[*] Multi-Vendor: Панель продавца: Ссылка на витрину в верхней/нижней панелях теперь ведет на микромагазин продавца.

[*] Multi-Vendor: Экспорт/импорт: При импорте продавцом существующих товаров с без / несуществующей категорией, такие товары обновятся и будут оставлены в существующих категориях.

==================
Исправления ошибок
==================

[!] Витрины: Перенаправление между витринами работало неправильно, если URL витрины частично совпадал с адресом магазина в файле настроек магазина. Исправлено.

[!] Витрины: Языки: Витрина могла быть создана без доступных языков. Исправлено.

[!] Группы пользователей: Создание группы пользователей без единой привилегии запрещено. Исправлено.

[!] Дизайн: Блоки: Названия блоков обрезались. Исправлено.

[!] Дизайн: Блоки: Товары: В теме "Responsive" блоки товаров с шаблоном "скроллер" не отображались на странице товара, если их было больше двух. Исправлено.

[!] Дизайн: В консоли возникали ошибки при прокрутке карусели. Исправлено.

[!] Дизайн: Возникали уведомления и предупреждения PHP при преобразовании стилей для языков с написанием справа налево. Исправлено.

[!] Дизайн: Настройки: Между галочками, расположенными в столбец, было разное расстояние. Исправлено.

[!] Дизайн: Некоторые подсказки не имели отступ. Исправлено.

[!] Дизайн: Некоторые таблицы не были адаптированы под телефоны. Исправлено.

[!] Дизайн: Нижняя панель инструментов для администратора: RTL: Подсветка активного раздела отображалась некорректно под RTL. Исправлено.

[!] Дизайн: Панель администратора: В меню шапки панели администратора некорректно отображались подменю на мобильных устройствах и планшетах. Исправлено.

[!] Дизайн: Продавцы: Платежи через Stripe Connect: Список продавцов отображался некорректно при подключении продавцов к Stripe Connect. Исправлено.

[!] Дизайн: Секция: Выравнивание содержимого работало только после обновления страницы. Исправлено.

[!] Дизайн: У некоторых заголовков таблиц не было разделителя. Исправлено.

[!] Дизайн: Уведомления: Во всплывающих окнах уведомления накладывались друг на друга. Исправлено.

[!] Дизайн: Уведомления: Обрезались уведомления во всплывающих окнах. Исправлено.

[!] Дизайн: Флажки, расположенные в одну строку, были не на одном уровне. Исправлено.

[!] Дизайн: Характеристики: В расширенном поиске отображался пустой блок. Исправлено.

[!] Заказы: Витрины: Назначенный менеджер не отображался в заказе. Исправлено.

[!] Импорт/Экспорт: Список полей макета был ошибочен после удаления выбранного макета. Исправлено.

[!] Макеты: Страницы: Выбор страниц был заблокирован и нельзя было добавить страницы к макету. Исправлено.

[!] Мобильное приложение: Исправлена работа всех переводов.

[!] Модули: CommerceML (1С, МойСклад, Бизнес.Ру) [Beta]: Вариации товара не создавались, если сопоставление характеристик было задано после того, как продукт уже был экспортирован в магазин.

[!] Модули: CommerceML (1С, МойСклад, Бизнес.Ру) [Beta]: Если в магазине есть товары, импортированные при помощи старого модуля, то при переходе на новый модуль при импорте товары дублировались. Исправлено.

[!] Модули: CommerceML (1С, МойСклад, Бизнес.Ру) [Beta]: Некорректно работала стратегия экспорта "Экспортировать только новые заказы и изменения в существующих". Исправлено.

[!] Модули: CommerceML (1С, МойСклад, Бизнес.Ру) [Beta]: Склады [Beta]: Склады и соотвествующее им количество товаров не подгружалось из системы учета. Исправлено.

[!] Модули: CommerceML: Импорт заказов завершался неудачей/ошибкой на стороне системы учёта, если не было выгружено ни одного заказа из магазина. Исправлено.

[!] Модули: CommerceML: Некорректная работа поля Brand/Производитель. Исправлено.

[!] Модули: CommerceML: Обмен данными мог завершаться с ошибками при импорте большого объема данных для одного типа сущности. Исправлено.

[!] Модули: REST API для витрины: Заказ прикреплялся к неправильной витрине. Исправлено.

[!] Модули: Возврат товаров: Ручной пересчет заказа выдавал неверную цену. Исправлено.

[!] Модули: RSS-лента: Даты в RSS-ленте были на языке витрины. Исправлено.

[!] Модули: SEO: Предупреждение PHP возникало на странице товара, если цена товара была скрыта для неавторизованных пользователей. Исправлено.

[!] Модули: SEO: При определённых условиях возникала ошибка PHP Notice. Исправлено.

[!] Модули: SEO: Цена товара в микроразметке отображалась только в основной валюте. Исправлено.

[!] Модули: Вариации товаров: Изображения не добавлялись в вариации если настройка "Свои изображения для дочерних вариаций" была отключена. Исправлено.

[!] Модули: Вариации товаров: Отзывы и комментарии: Создание новой вариации могло завершиться ошибкой записи в БД. Исправлено.

[!] Модули: Вариации товаров: При сохранении вариаций товаров на вкладках "Вкладки" и "Макеты" появлялась вторая кнопка "Сохранить". Исправлено.

[!] Модули: Вариации товаров:  Экспорт/Импорт: В некоторых случаях вариации не экспортировались. Исправлено.

[!] Модули: Водяные знаки: При попытке распечатать счет заказа возникала ошибка PHP. Исправлено.

[!] Модули: Возврат товаров: Дизайн: Бухгалтерский учёт: В таблице отображались флажки для выбора элементов, когда не было действий для множественного выбора. Исправлено.

[!] Модули: Вход через соцсети: При входе через LinkedIn могла возникнуть ошибка. Исправлено.

[!] Модули: Выборка только сторонних модулей работала неправильно. Исправлено.

[!] Модули: Магазины и пункты самовывоза: Время доставки для способа доставки "Самовывоз" могло не показываться на странице оформления заказа в некоторых ситуациях. Исправлено.

[!] Модули: Обратный вызов:  Кнопка "Купить в один клик" не работала на списке товаров. Исправлено.

[!] Модули: Отзывы и комментарии: Вариации товаров: Пропадали отзывы о товаре с вариациями после смены главной вариации. Исправлено.

[!] Модули: ПЭК: Добавлена поддержка Симферополя (Республика Крым) и Россошь (Воронежская область).

[!] Модули: Платежи через PayPal: Загружаемые товары: Могла возникнуть PHP ошибка при покупке загружаемых товаров через PayPal. Исправлено.

[!] Модули: Платежи через PayPal: Покупатель не мог разместить заказ при определенном сочетании настроек магазина, налогов и способа оплаты. Исправлено.

[!] Модули: Прайс-лист: Созданный прайс-лист мог быть пустым. Исправлено.

[!] Модули: Рассылки: Если пользователь подпишется на рассылку в магазине, где нет ни одного списка подписок, то подписка не создавалась. Исправлено.

[!] Модули: Расширенный импорт товаров: Постраничная навигация для пресетов продавца работала некорректно. Исправлено.

[!] Модули: Склады [Бета]: Уведомление о появлении товара в наличии могло не отправляться. Исправлено.

[!] Модули: Тинькофф: Кредитование покупателей (КупиВкредит): Невозможно было оформить заказ при использовании промо-кода. Исправлено.

[!] Модули: Центр сообщений: На боковой панели поиска некорректно отображалась панель с сохраненными поисками, и были мелкие ошибки. Исправлено.

[!] Модули: Центр сообщений: Язык уведомлений мог не совпадать с указанным языком в настройках получателя. Исправлено.

[!] Модули: Экспорт в Яндекс.Маркет: Настройки журнала событий модуля не удалялись при удалении модуля. Исправлено.

[!] Модули: Экспорт в Яндекс.Маркет: Товары с нулевым количеством в некоторых случаях экспортировались в прайс-лист, если была включена настройка "Экспортировать только товары, которые есть в наличии". Исправлено.

[!] Модули: Яндекс.Доставка: Создание отгрузки на минимально возможную дату могло вызывать ошибки. Исправлено.

[!] Модули: Яндекс.Доставка: Часть информации о заказе не переносилась в заказ в системе Яндекс.Доставка. Исправлено.

[!] Настройки: Модули: Названия секций настроек модулей могли загружаться некорректно в магазинах с несколькими витринами. Исправлено.

[!] Оформление заказа: Данные пользователя могли быть заменены данными пользователя из последнего заказа, который редактировал администратор. Исправлено.

[!] Панель администратора: Администратор мог взаимодействовать со статусами элементов в некоторых разделах, даже если у него не было прав. Исправлено.

[!] Производительность: JS: Страница товара и детальная страница заказа не отображались, пока скрипты не были загружены. Исправлено.

[!] Редактор тем: Неправильно отображались выбранные шрифты. Исправлено.

[!] Способы доставки: Australia Post: Список служб доставки содержал некорректно работающие опции. Исправлено.

[!] Способы доставки: Если список способов доставки был пуст, то боковое меню отображалось некорректно. Исправлено.

[!] Способы доставки: Тарифы для дробных значений веса могли быть не сохранены в некоторых ситуациях. Исправлено.

[!] Тексты и языки: Для текста в пустой категории не отображался HTML код. Исправлено.

[!] Товары: UI: Выделение товаров сбрасывалось, если была нажата кнопка отмены в форме массового редактирования товаров. Исправлено.

[!] Товары: Если выбрать "Изменить родительское (Стандартный шаблон)" в качестве отображения карточки товара при его создании, то могла выходить ошибка. Исправлено.

[!] Товары: Массовое обновление товаров: При выполнении массового обновления товаров, могли возникнуть PHP TypeError и Database error при использовании модулей, которые расширяли функциональность товаров. Исправлено.

[!] Товары: Характеристики: Характеристика с типом "Группа флажков" всегда оставалась неактивной на форме "Применить значения к выделенным товарам" на странице массового редактирования товаров. Исправлено.

[!] Уведомления: Email: Уведомления о событиях не отсылались, если у них было несколько получателей. Исправлено.

[!] Файлы: Администраторы, которым назначена группа пользователей, не могли выбирать файлы с сервера при загрузке. Исправлено.

[!] Фильтр товаров: Если сразу выбрана недопустимая комбинация фильтров, то часть фильтров пропадала. Исправлено.

[!] Фильтры товаров: На странице бренда не работали фильтры. Исправлено.

[!] Характеристики товара: При переключении на вторую страницу вариантов характеристики отображалась палитра цветов. Исправлено.

[!] Характеристики: При смене типа фильтра на "Слайдер с числами", фильтр в витрине работал неккоректно. Исправлено.

[!] Экспорт/импорт: Заказы: Скидка по заказам не экспортировалась. Исправлено.

[!] Ядро: Настройки: Модули: Настройки некоторых модулей не редактировались в магазине с одной витриной. Исправлено.

[!] Ядро: Настройки: Модули: При открытии настроек некоторых модулей в магазине с несколькими витринами появлялась ошибка. Исправлено.

[!] Языки: Переводы: Кнопка "Обновить для всех" не работала. Исправлено.

[!] Multi-Vendor: Модули: Местоположение продавцов [Beta]: После выбора местоположения покупателя расстояние до продавцов не обновлялось. Исправлено.

[!] Multi-Vendor: Модули: Оплата от продавцов администратору: Результаты поиска продавцов в панели администратора могли быть неверными. Исправлено.

[!] Multi-Vendor: Модули: Расширенный импорт товаров: Администратор маркетплейса не мог управлять таблицей соответствий полей в пресете для продавца. Исправлено.

[!] Multi-Vendor: Модули: Оплата напрямую продавцам: Магазины и пункты самовывоза: В некоторых случаях на странице оформления заказа могли отображаться пункты самовывоза, не соответствующие продавцу. Исправлено.

[!] Multi-Vendor: Страница оформления заказа: Могли возникать ошибки, если использовались способы доставки от разных продавцов. Исправлено.

[!] Multi-Vendor: Пользователи: Профили: Администратор продавца мог включать, выключать доступ к API у администраторов продавца. Исправлено.

[!] Multi-Vendor: Почтовые уведомления: Уведомления об изменениях в профиле администратора продавца не отправляются на почту. Исправлено.

[!] Multi-Vendor: Продавцы: Баланс: Хуки: В таблицу транзакций невозможно было добавить новую колонку с помощью хуков шаблонов. Исправлено.

[!] Multi-Vendor: Продавцы: Письмо с уведомлением об изменении статуса продавца могло прийти на неправильном языке. Исправлено.

[!] Multi-Vendor: Промоакции: Промоакция, у которой условия строятся на способах доставки, не применялась, если сделать заказ с товарами от разных продавцов. Исправлено.

[!] Multi-Vendor: Уведомления: Уведомление по электронной почте о создании новой учетной записи продавца содержало неверный копирайт. Исправлено.

[!] Multi-Vendor Plus: Модули: Зависимости для способов оплаты: Оплата напрямую продавцам: Не было возможности включить способы оплаты продавцов у общих способов доставки. Исправлено.

[!] Multi-Vendor Plus: Модули: Местоположение продавцов [Beta]: Привилегии продавцов: При привилегии "Продавцы: Только просмотр", адрес продавца не отображался в панели продавца. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Поиск по товарам, которые можно продавать, в панели администратора возвращал неправильные результаты. Исправлено.

[!] Multi-Vendor Plus: Модули: Общие товары для продавцов: Предложения продавцов отображались в товарных блоках с наполнением "Новые" на страницах товаров. Исправлено.

[!] Multi-Vendor Plus: Модули: Тарифные планы для продавцов: Комиссии для категорий: Выплаты на странице "Бухгалтерский отчет" отображались неверно для администратора, если комиссия на категорию купленного товара отличалась от комиссии тарифного плана продавца. Исправлено.

[!] Multi-Vendor Ultimate: Витрины: В случае, если путь у витрин частично совпадал, некоторые витрины могли открываться некорректно. Исправлено.

[!] Multi-Vendor Ultimate: Витрины: У продавца не было переключателя витрин, если у него было более 1 доступной витрины. Исправлено.

[!] Multi-Vendor Ultimate: Если в магазине было несколько витрин, при предварительном просмотре макета открывалась основная витрина. Исправлено.

[!] Multi-Vendor Ultimate: Модули: Рейтинг продавцов: Экспорт в Яндекс.Маркет: Настройки журнала событий модулей отображались неправильно в магазинах с несколькими витринами. Исправлено.

[!] Multi-Vendor Ultimate: Настройки: Переключатель витрины отображался в разделах, в которых не было поддержки нескольких витрин. Исправлено.

[!] Products: Features: При удалении категории у товара, характеристики товара из этой категории не удалялись. Исправлено.

[!] TinyMCE: Значения в разных полях описания с использованием редактора TinyMCE становились одинаковыми. Исправлено.

[!] UI / UX: При переходе по вкладкам, контекстное меню оставалось и работало некорректно на странице результатов поиска. Исправлено.
