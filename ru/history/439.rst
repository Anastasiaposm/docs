*****
4.3.9
*****

==================================
Новая функциональность и улучшения
==================================

[+] Модули: PayPal платежи: добавлена возможность устанавливать дополнительный платёжный сбор на способы оплаты, в которых используются сервисы Paypal.

[+] Хуки: Добавлен дополнительный аргумент к хуку "update_image" для отделения клонирования от других случаев.

[+] Хуки: Заказы: Добавлен новый хук для информации по деталям поставки.

[+] Хуки: Товары: Добавлен новый хук для расширения полей массового обновления товаров.

[+] Хуки: Товары: Добавлен новый хук для групп полей.

=========================================
Изменения в существующей функциональности
=========================================

[*] Способы доставки: Для СПСР и Pickpoint было добавлено кеширование данных, чтобы минимизировать количество запросов.

[*] Дизайн: Темы: Responsive: Шаблон "multiple_buttons.tpl" был признан устаревшим.

==================
Исправления ошибок
==================

[!] Модули: Unisender: Блок с подпиской на рассылки отображался дважды. Исправлено.

[!] Модули: Города: В корзине поле города очищалось при получении расценки. Исправлено.

[!] Модули: Российские способы оплаты: При выставлении счета не отображалось изображение печати. Исправлено.

[!] Модули: Edost: Автозаполнение города не появлялось при повторном переходе на второй шаг. Исправлено.

[!] Модули: Edost: Доставка не рассчитывалась для городов с одинаковыми названиями. Исправлено.

[!] Дизайн: Панель администратора: При перерасчете суммы на редактировании заказа пропадали поля у шаблона выставления счета. Исправлено.

[!] Экспорт/Импорт: При импорте точек самовывозов неправильно определялся идентификатор компании. Исправлено.

[!] Незавершённые покупки: У поля "cscart_user_session_products.order_id" не было аттрибута "unsigned". Исправлено.

[!] Модули: Ограничение по возрасту: В некоторых товарных блоках товары с ограничениями по возрасту отображались без ограничений. Исправлено.

[!] Модули: Синхронизация с eBay: Не работала инициализация характеристики товара, если у товара была пустая группа характеристик. Исправлено.

[!] Модули: Синхронизация с eBay: Не работало изменение описания товара, если использовался WYSIWYG. Исправлено.

[!] Модули: Поддержка HiDPI мониторов: Модуль уменьшал изображения товаров во время процесса клонирования. Исправлено.

[!] Модули: Масштаб изображения: Изменение масштаба подробного изображения в соответствии с его пропорциями приводило к проблемам с быстродействием. Исправлено.

[!] Модули: PayPal платежи: Обработка заказа: Отклик платёжного процессора не менялся при получении IPN. Исправлено.

[!] Модули: Социальные кнопки: Ссылка в почте выглядела неприглядно. Исправлено.

[!] Модули: Социальные кнопки: Для страниц генерировались неправильные URL. Исправлено.

[!] Оформление заказа: Способы оплаты: eWAY: В некоторых случаях шифрование данных платёжной формы проводилось несколько раз. Исправлено.

[!] Оформление заказа: Налоги: В корзине и на страницах оформления заказа для неавторизованных пользователей не рассчитывались налоги, основанные на стоимости каждого отдельного товара. Исправлено.

[!] Оформление заказа: Уведомление о пустой корзине использовало имя языковой переменной вместо текста. Исправлено.

[!] Ядро: Страницы: Поля "avail_from_timestamp" и "avail_till_timestamp" очищались функцией "fn_update_page". Исправлено.

[!] Ядро: URL: В режиме "Все магазины" могли быть созданы неверные ссылки от панели администратора к витринам. Исправлено.

[!] Дизайн: Изображения: Изображения отображались некорректно, если были очень большими. Исправлено.

[!] Email: Ссылки, содержащие текст в punycode, отображались некорректно. Исправлено.

[!] Заказы: Если в магазине было более 10000000 заказов, администратор не мог открыть заказы с id > 10000000 в секции Маркетинг -> Незавершённые покупки. Исправлено.

[!] Товары: Фильтры: Фильтр для общей характеристики не отображался на дополнительной витрине, если на главной витрине данный фильтр уже присутствовал. Исправлено.

[!] Промо-акции: Если в начале кода купона были цифры, отображалось некорректное уведомление о том, что код сработал. Исправлено.

[!] {#6377} Модули: Возврат товаров: PayPal: Частичный возврат средств мог быть осуществлён несколько раз, при изменении статуса возврата. Исправлено.

[!] {#6382} Товары: Быстрый просмотр: При изменении опции изображение товара не менялось. Исправлено.

[!] {#6387} Модули: Расположение магазина: При нажатии кнопки "Просмотр магазина" страница не переключалась к карте. Исправлено.

[!] {#6389} Заказы: Номер отслеживания не отображался на странице деталей заказа, если не был указан перевозчик. Исправлено.

[!] {#6410} Экспорт/Импорт: Основной id новой записи мог быть неверным. Исправлено.

[!] {#6418} Ядро: CSS: Названия шрифтов указывались неверно в файле скомпилированных стилей, при повышении приоритета значения CSS-свойства с помощью !important. Исправлено.
