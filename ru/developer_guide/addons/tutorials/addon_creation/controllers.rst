**************************
15. Добавление controllers
**************************

CS-Cart содержит файлы контроллеров, в которых выполняются основные функции платформы.

    *   :doc:`см. "Структура платформы" </developer_guide/core/structure/index>`

    *   :doc:`см. "Контроллеры" </developer_guide/core/controllers/index>`

Создание файла controllers
--------------------------

Добавим функционал для открытия страницы при нажатии на пункт меню ``first_addons``. Пункт меню содержит url - first_addon.manage, где first_addon - название файла контроллера, manage - mode контроллера.

1.  Пройдите в папку ``/app/addons/[название_модуля]/``

2.  Создайте новую папку с названием ``controllers``.

3.  Пройдите в созданную папку и добавьте папку /backend.
    **backend** означает, что контроллер будет выполнятся для панели администратора.

4.  Пройдите в созданную папку и добавьте файл first_addon.php:

    ``/app/addons/[название_модуля]/controllers/backend/first_addon.php``

    ``first_addon`` - это название файла, которое берется из url

5.  Добавим код в контроллер, который будет выполняться при нажатии на пункт меню ``first_addons``.

    .. literalinclude:: files/controllers.php
        :linenos:

    Код содержит:

    *   "if ($mode == 'manage')" - условие проверки режима(mode).

    *   "Tygh::$app['view']->assign('all_data', $data)" - передача данных переменной ``$data``, данные переменной будут доступны в шаблоне manage, к переменной в шаблоне необходимо будет обращаться по имени ``all_data``.

6.  Теперь при нажатии на пункте меню будет выполняться код из контроллера first_addon с mode равным manage. Вы можете добавить **fn_print_r(1);** в код контроллера, для проверки его выполнения.
